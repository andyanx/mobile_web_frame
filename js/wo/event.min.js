define("wo/event",["base_package","frame_package","btn_package","wo_config","commom_function","get_template","footer_view","notice","new_alert_v2","select_module"],function(e,t){var a=e("zepto");e("wo_config");var i=e("page_control"),n=e("backbone"),o=e("commom_function"),r=e("mustache");e("notice"),e("cookies");var l=e("new_alert_v2"),l=e("new_alert_v2");t.route={event:"event"},t.new_page_entity=function(){function t(){h.$el.find(".main_wraper").html(""),g.each(function(e){var t=new u(e.toJSON());h.$el.find(".main_wraper").append(t.$el)})}function s(e){var t=new u(e.toJSON());h.$el.find(".main_wraper").append(t.$el)}var _={title:"\u4e3b\u9898\u6d3b\u52a8",transition_type:"slide",dom_not_cache:!0,ignore_exist:!0};_.initialize=function(){this.render()},_.render=function(){var t=e("get_template"),i=t.template_obj(),n=i.event;this.$el.append(a(n))};var d=e("select_module")(),c=new d({options_data:[{key:"",val:"\u5168\u90e8\u6d3b\u52a8"},{key:"\u81ea\u62cd",val:"\u81ea\u62cd"},{key:"\u65c5\u6e38",val:"\u65c5\u6e38"},{key:"\u7f8e\u98df",val:"\u7f8e\u98df"},{key:"\u840c\u5ba0",val:"\u840c\u5ba0"},{key:"\u73a9\u7269",val:"\u73a9\u7269"},{key:"\u6444\u5f71",val:"\u6444\u5f71"},{key:"\u73a9\u4e50",val:"\u73a9\u4e50"},{key:"\u6211\u7684\u57ce\u5e02",val:"\u6211\u7684\u57ce\u5e02"},{key:"\u5fc3\u60c5",val:"\u5fc3\u60c5"}],onchange:function(){var e=this.get_select_data();console.log(e),y=e.val,g.refresh()}});_.events={"tap .ui-btn-prev-wrap":function(){i.back()},swiperight:function(){o.get_ua().is_uc||i.back()},"tap .data-more_btn":function(){return i.page_transit_status()?!1:(g.get_more_item(),void 0)},"tap [data-filter_in]":function(){c.open()}},_.window_change=function(e){a(e.el).find(".wraper_con_list").height(o.container_height_with_head()),a(e.el).find(".wraper_con_filter").height(o.container_height_with_head());var t=parseInt(.25*(window.innerWidth-20));a(e.el).find(".event-img img").height(t)};var p,f,h,g,m,u=n.View.extend({tagName:"div",className:"event-img  fixed_scroll_blink bdb-line re ph mt10",initialize:function(e){this.cover_img_url=e.cover_img_url,this.keyword=e.keyword,1==e.status&&(e.on_going=1),e.img_height=x;var t='<img src={{cover_img_url}} class="img_buffer_bg w-100" style="height:{{img_height}}px"/>{{#on_going}}<em class="icon-going icon-bg-common" >{{/on_going}}</em>',a=r.to_html(t,e);this.$el.html(a)},events:{"tap .event-img":function(){i.navigate_to_page("theme_pic_list/"+encodeURIComponent(this.keyword))}}}),v=10,b={ajax_load_finish:function(e,t){setTimeout(function(){p.close()},300),m.reset(),0==t||v>t.length?m.hide():m.show()},before_refresh:function(){p=l.show({text:"\u83b7\u53d6\u4e2d",type:"loading",append_target:h.$el,is_cover:!0,auto_close_time:!1})},before_get_more:function(){m.loadding()}},w=n.Collection.extend({url:"http://m.poco.cn/mobile/action/event.php",refresh:function(){b.data={tag_name:y},o.collection_refresh_function.call(this,b)},get_more_item:function(){b.data={tag_name:y},o.collection_get_more_function.call(this,b)}}),y=!1,x=parseInt(.25*(window.innerWidth-20));_.page_before_hide=function(){c.close()},_.page_init=function(i){h=i;var n=a(i.el).find("header[data_event_list]"),r=e("page_back_btn")();n.prepend(r.$el);var l=a(i.el).find(".wraper_con_list"),_=e("scroll");f=_.new_scroll(l,{view_height:o.container_height_with_head()}),m=e("load_more_btn")(),i.$el.find(".load_more_btn_wraper").append(m.$el),g=new w,g.bind("reset",t,i),g.bind("add",s,i),g.refresh()};var k=e("page").new_page(_);return k}}),"function"==typeof process_add&&process_add();
define("wo/user_photo",["base_package","frame_package","btn_package","commom_function","wo_config","get_template","new_alert_v2","show_big_img","world_list_module"],function(e,i){var t=e("zepto"),a=e("page_control");e("backbone");var n=e("commom_function");e("mustache");var o=e("wo_config");e("new_alert_v2"),e("show_big_img"),i.route={"user_photo/:query(/:category)(/:force_type)":"user_photo"},i.new_page_entity=function(){var i={manual_title:!0,transition_type:"slide",dom_not_cache:!0,ignore_exist:!0};i.initialize=function(){this.render()},i.render=function(){var e='<div class="wrap-box see-stranger"><header class="header fb re font_wryh"><h1 class="logo" data-user_name></h1></header><div class="content-10 main_wraper"><div class="index-page" style="padding-top:45px;"><div style="overflow:hidden;position:relative;z-index: 1;"><div style="-webkit-transform:translateZ(0px);"></div></div><div class="banner_tips radius-2px clearfix re" style="padding: 15px 10px;margin-bottom: -5px;display:none"><div class="txt color333"><em class="icon icon-bg-common"></em>\u957f\u6309\u7167\u7247\uff0c\u53ef\u4ee5\u53bb\u9664\u4e0d\u7b26\u7684\u5185\u5bb9</div><div class="btn-close-wrap"><span class="btn-close radius-2px"><i class="icon-close icon-bg-common"></i></span></div></div><div class="main_container"></div></div></div></div>';this.$el.append(t(e))},i.events={"tap .ui-btn-refresh-wrap":function(){return a.page_transit_status()?!1:(c.start_reset(),void 0)},"tap .btn-close-wrap":function(){d.$el.find(".banner_tips").hide(),window.localStorage.setItem("user_photo_pics",1)},"tap .ui-btn-prev-wrap":function(){a.back()},swiperight:function(){n.get_ua().is_uc||a.back()},"hold .item":function(e){var i=n.get_local_poco_id();if(l==i&&!n.is_empty(s)&&confirm("\u662f\u5426\u6392\u9664\u51fa\u8be5\u5206\u7c7b?")){var a=t(e.currentTarget).attr("art_id");n.send_request({url:"http://m.poco.cn/mobile/action/del_tag.php",type:"GET",data:{keyword:s,art_id:a,is_select:0}}),t(e.currentTarget).remove()}},"hold .item-act":function(e){var i=n.get_local_poco_id();if(l==i&&!n.is_empty(s)&&confirm("\u662f\u5426\u6392\u9664\u51fa\u8be5\u5206\u7c7b?")){var a=t(e.currentTarget).attr("art_id");n.send_request({url:o.ajax_url.update_my_life_grid_box,type:"GET",data:{tag_id:s,art_id:a,is_select:0}}),t(e.currentTarget).remove()}}},i.window_change=function(e){t(e.el).find(".main_wraper").height(n.container_height_with_head()),t(e.el).find(".waterfall-item img").css({height:"auto"})};var d,s,l,r,c,_;i.page_init=function(i,a){d=i,l=a[0],s=a[1]?decodeURIComponent(a[1]):"";var m=a[2];if(0==m)var p="photowall";else if(1==m)var p="big_img_list";else var p=!1;var f=n.get_local_poco_id();f!=l||n.is_empty(s)||(window.localStorage.getItem("user_photo_pics")?i.$el.find(".banner_tips").hide():i.$el.find(".banner_tips").show()),r=e("refresh_btn")(),i.$el.find(".header").append(r.$el);var h=t(i.el).find("header"),g=e("page_back_btn")();h.prepend(g.$el);var u=t(i.el).find(".main_wraper"),v=e("scroll");view_scroll_obj=v.new_scroll(u,{view_height:n.container_height_with_head(),use_lazyload:!0});var b=e("world_list_module")();c=new b({url:o.ajax_url.user_photo,list_type:"both",data:{user_id:l,keyword:s},photowall_content_type:"profile",main_container:t(i.el).find(".main_container"),force_type:p,page_view:t(i.el).find(".wrap-box"),oncomplete:function(){r.reset()},onloading:function(){r.loadding()},onreset:function(){view_scroll_obj.scroll_to(0),d.$el&&d.$el.find("header").animate({translate3d:"0px, 0px, 0px"},0,"ease-in"),n.page_pv_stat_action()},onlisttypechange:function(){view_scroll_obj.trigger_scrollend()},parse:function(e){return n.is_empty(e.user_nickname)||(_=n.is_empty(e.keyword)?e.user_nickname:e.user_nickname+" - "+e.keyword,document.title=_,i.$el.find("[data-user_name]").html(_)),n.is_empty(e.keyword)||i.$el.find("[data-tag_name]").html("#"+e.keyword+"#"),e.photo_list},append_html:'<div data-tag_name style="line-height:30px;font-size:14px;height:30px;"></div>'}),n.is_empty(s)?c.start_reset(2):c.start_reset()},i.page_before_show=function(){_&&(document.title=_)};var m=e("page").new_page(i);return m}}),"function"==typeof process_add&&process_add();
define("wo/theme",["base_package","frame_package","btn_package","commom_function","wo_config","get_template","footer_view","notice"],function(e,i){var a=e("zepto"),t=e("page_control"),n=e("backbone"),d=e("commom_function");e("mustache");var o=e("wo_config"),s=e("notice");i.route={theme:"theme"},i.new_page_entity=function(){function i(){p.loadding(),f.fetch({type:"GET",data:{t:parseInt((new Date).getTime())},timeout:o.ajax_timeout,success:function(){t.unlock_page(),p.reset()},error:function(){t.unlock_page(),p.reset()}})}function l(e){var i=this,t=e.attributes,n=i.$el.find(".event article");a(t.event).each(function(e,i){"POCO LEAVE\u5b63"==i.title?n.eq(e).find(".event_content").html("#POCO LEAVE\u5b63#\u725b\u4eba\u8bf7\u8fdb"):n.eq(e).find(".event_content").html("#"+i.title+"#"),i.medal_id>0?n.eq(e).find(".doorplate").show():n.eq(e).find(".doorplate").hide(),n.eq(e).attr("keyword",i.title),n.eq(e).attr("des",i.content),n.eq(e).attr("award",i.activity_content)});var d=i.$el.find(".keyword td"),o=i.$el.find(".keyword article");a(t.theme).each(function(e,i){o.eq(e).html("#"+i.title+"#"),d.eq(e).attr("keyword",i.title),d.eq(e).attr("des",i.content),d.eq(e).attr("award",i.activity_content)}),7>t.theme.length&&i.$el.find(".keyword tr").last().hide()}var r={route:{theme:"theme"},transition_type:"none"};r.initialize=function(){this.render()};var c;r.render=function(){var i=e("get_template"),t=e("footer_view");c=new t({cur:"theme"});var n=i.template_obj(),d=n.theme;this.$el.append(a(d)),this.$el.find(".footer").append(c.$el)},r.events={"tap .ui-btn-refresh-wrap":function(){return t.page_transit_status()?!1:(i(),void 0)},"tap .event article":function(e){if(t.page_lock_status())return!1;if(t.page_transit_status())return!1;var i=a(e.currentTarget).attr("keyword");if(null==i)return!1;i=encodeURIComponent(i);var n=a(e.currentTarget).attr("des"),d=a(e.currentTarget).attr("award");t.navigate_to_page("theme_pic_list/"+i,{des:n,award:d})},"tap .keyword td":function(e){if(t.page_lock_status())return!1;if(t.page_transit_status())return!1;var i=a(e.currentTarget).attr("keyword");if(null==i)return!1;i=encodeURIComponent(i);var n=a(e.currentTarget).attr("des"),d=a(e.currentTarget).attr("award");t.navigate_to_page("theme_pic_list/"+i,{des:n,award:d})}},r.window_change=function(e){a(e.el).find(".main_wraper").height(d.container_height_with_head_and_nav())},r.page_before_show=function(e){a(e.el).find(".main_wraper").height(d.container_height_with_head_and_nav()),s.footer_notice_ui_refresh()};var _,m,p,f,h=n.Model.extend({defaults:{evnet:""},url:"http://m.poco.cn/mobile/action/theme.php",parse:function(e){return e&&e.result_data!==void 0?e.result_data:e}});r.page_init=function(n){t.lock_page(),p=e("refresh_btn")(),n.$el.find(".header").append(p.$el);var o=a(n.el).find(".main_wraper");m=a(n.el);var s=e("scroll");_=s.new_scroll(o,{view_height:d.container_height_with_head_and_nav()}),f=new h,f.bind("change",l,n),i()};var g=e("page").new_page(r);return g}});
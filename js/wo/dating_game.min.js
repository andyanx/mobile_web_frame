define("wo/dating_game",["base_package","frame_package","btn_package","wo_config","commom_function","get_template","footer_view","notice","new_alert_v2","world_list_module"],function(e,t){var a=e("zepto"),i=e("wo_config"),n=e("page_control"),o=e("backbone"),l=e("commom_function");e("mustache"),e("notice"),e("cookies");var r="";t.route={"dating_game(/:sex)":"dating_game"},t.new_page_entity=function(){function t(){var e=g.models[0].attributes;"\u7537"==r?w=e:"\u5973"==r?y=e:"me"==r&&(e=x),_(e),d(e)}function s(e){"\u7537"==e?(m=f.find("[data-male_container]"),f.find("[data-male_container]").show(),f.find("[data-female_container]").hide(),f.find("[data-my_container]").hide()):"\u5973"==e?(m=f.find("[data-female_container]"),f.find("[data-female_container]").show(),f.find("[data-male_container]").hide(),f.find("[data-my_container]").hide()):(m=f.find("[data-my_container]"),f.find("[data-female_container]").hide(),f.find("[data-male_container]").hide(),f.find("[data-my_container]").show())}function _(e){c();var t=new Image;t.src=l.matching_img_size(e.cover_img_url,"mb"),m.find(".big_img").hide(),m.find(".loading").show(),t.onload=function(){m.find(".big_img").attr({src:this.src,user_id:e.user_id}),m.find(".loading").hide(),m.find(".big_img").show()}}function d(e){console.log(e),m.find(".instrest_tags").html(""),m.find(".name").html(""),m.find(".location_name").html(""),f.find(".name").html(e.nickname);var t="";t=l.is_empty(e.location_city)?e.location_province:e.location_province+"\u00b7"+e.location_city,f.find(".location_name").html(t);var i="";a(e.interest_tags).length>0?(f.find(".instrest_tags").show(),a(e.interest_tags).each(function(e,t){i+='<span class="tag_text f10 radius-2px">'+t+"</span>"})):f.find(".instrest_tags").hide(),f.find(".instrest_tags").html(i),"me"==r?(f.find(".footer-dating-publish").show(),f.find(".footer-dating").hide()):(f.find(".footer-dating-publish").hide(),f.find(".footer-dating").show())}function c(){var e=window.innerHeight-45-45;m.find(".big_img_container").height(e)}var p={route:{"dating_game(/:sex)":"dating_game"},transition_type:"slide",dom_not_cache:!0};p.initialize=function(){this.render()},p.render=function(){var e=this,t='<div class="wrap-box dating_game_page"><header class="header font_wryh tc re"><div class="tap-select-wrap"><span class="header_title"></span><div class="tab-select re bgc-fff-e2e"><ul class="clearfix"><li data-select_sex="\u5973"><span>\u5973\u751f</span><em class="pop-empty pop-empty-1"></em></li><li data-select_sex="\u7537"><span>\u7537\u751f</span></li><li data-select_sex="me"><span>\u6211</span><em class="pop-empty pop-empty-2"></em></li></ul></div></div></header><div class="main_wraper" style="position:relative"><div class="friend-act font_wryh " style="padding-top:45px;"><div class="friend_ori dating_game" style="width: 100%;"><div data-male_container class="list_container color000 clearfix" style="display:none"><div><div class="big_img_container re oh"><table border="0" cellspacing="0" cellpadding="0" class="img-box-table w-100 h-100"><tr><td valign="middle" align="center"><div class="icon-bg-common loading"></div><img class="big_img img_buffer_bg" data-big_img src=""></td></tr></table></div></div></div><div data-female_container class="list_container color000 clearfix"><div><div class="big_img_container re oh"><table border="0" cellspacing="0" cellpadding="0" class="img-box-table w-100 h-100"><tr><td valign="middle" align="center"><div class="icon-bg-common loading"></div><img class="big_img img_buffer_bg" data-big_img src=""></td></tr></table></div></div></div><div data-my_container class="list_container color000 clearfix"><div><div class="big_img_container re oh"><table border="0" cellspacing="0" cellpadding="0" class="img-box-table w-100 h-100"><tr><td valign="middle" align="center"><div class="icon-bg-common loading"></div><img class="big_img img_buffer_bg" data-big_img src=""></td></tr></table></div></div></div></div></div><div class="txt_info colorfff pt10 pb10 pl10"><table cellpadding="0" cellspacing="0" border="0" width="100%"><tr><td valign="top"><div class="user_info" style="color:#fff"><span class="name mr5" style="font-size:12px"></span><span class="location_name f10"></span></div></td></tr><tr><td valign="top"><div class="instrest_tags oh"></div></td></tr></table></div><div class="fade_txt_info w-100 bgc-0-85"></div><div style="overflow:hidden;position:relative;z-index: 1;"><div style="-webkit-transform:translateZ(0px);"></div></div></div><div class="comment-love-mod footer-dating-publish"><ul class="clearfix"><li publish_btn class="publish w-100"><em class="icon icon-bg-common dib mr5 vam"></em>\u6362\u4e00\u5f20</li></ul></div><div class="comment-love-mod footer-dating" style="display:none"><ul class="clearfix f10"><li class="his-home-page"><em class="icon icon-bg-common"></em>Ta\u7684\u4e3b\u9875</li><li class="send-letter"><em class="icon icon-bg-common"></em>\u53d1\u79c1\u4fe1</li><li class="next-per cur"><em class="icon icon-bg-common"></em>\u6362\u4e00\u4e2a</li></ul></div></div>';e.$el.append(a(t))},p.events={"tap .ui-btn-prev-wrap":function(){n.back()},"tap .his-home-page":function(){var e;e="\u7537"==r?w.user_id:"\u5973"==r?y.user_id:x.user_id,n.navigate_to_page("user_profile/"+e)},"tap .send-letter":function(){var e=l.publish_login_requirement();if(e)return n.navigate_to_page("login"),void 0;var t;t="\u7537"==r?w.user_id:"\u5973"==r?y.user_id:x.user_id,n.navigate_to_page("message_list/"+t)},"tap [data-select_sex]":function(e){var t=a(e.currentTarget);if("me"==t.attr("data-select_sex")&&0>=x.length)return n.navigate_to_page("recommend_me"),void 0;if(r=t.attr("data-select_sex"),f.find("[data-select_sex]").removeClass("cur"),t.addClass("cur"),s(r),l.is_empty(m.find(".big_img").attr("user_id"))&&"me"!=r)g.refresh();else{var i;"\u7537"==r?i=w:"\u5973"==r?i=y:(i=x,_(i)),d(i)}},"tap .next-per":function(){g.refresh()},"tap .footer-dating-publish":function(){n.navigate_to_page("recommend_me")},swiperight:function(){g.refresh()},swipeleft:function(){g.refresh()}};var f,h,m,g,u={ajax_load_finish:function(){},before_refresh:function(){},before_get_more:function(){}},v=o.Model.extend({defaults:{}}),b=o.Collection.extend({model:v,url:function(){return i.ajax_url.get_dating_game_pics},refresh:function(){u.data={sex:encodeURIComponent(r)},l.collection_refresh_function.call(this,u),l.page_pv_stat_action()},get_more_item:function(){console.log(r),u.data={sex:encodeURIComponent(r)},l.collection_get_more_function.call(this,u)},parse:function(e){return e&&e.result_data.info!==void 0?(r=e.result_data.sex,s(r),f.find("[data-select_sex]").removeClass("cur"),f.find("[data-select_sex='"+r+"']").addClass("cur"),x=e.result_data.my_info,e.result_data.info):e}}),w={},y={},x={};p.page_init=function(i,n){switch(f=a(i.el),h=n,parseInt(n[0])){case 0:r="\u5973";break;case 1:r="\u7537";break;case 2:r="me";break;default:r="\u5973"}e("scroll"),a(i.el).find(".main_wraper");var o=a(i.el).find("header"),l=e("page_back_btn")();o.prepend(l.$el),g=new b,g.bind("reset",t,i),g.bind("add",t,i),g.refresh()},p.window_change=function(){c()};var k=e("page").new_page(p);return k}}),"function"==typeof process_add&&process_add();
define("wo/login",["base_package","frame_package","btn_package","wo_config","commom_function","get_template","new_alert_v2"],function(e,i){var a=e("zepto"),n=e("wo_config"),t=e("page_control");e("backbone");var d=e("commom_function");e("mustache");var o=e("new_alert_v2");i.route={"login(/:login_type)":"login"},i.new_page_entity=function(){function i(e,i,a){var n="",o="http://m.poco.cn/mobile/action/login_bind.php?is_jump_page=1&login_tag="+e;if(i.find(".login").hide(),"poco"==e)return r(i),i.find(".poco_login").show(),void 0;if("qqzone"==e||"qqweibo"==e||"sina"==e){var s=t.page_history();n=s[s.length-2],a&&""!=a&&(n=a),n||(n=d.get_target_refresh_url_by_hash_name());var l=v&&v.return_success;return l&&(n=v&&v.url_str),top.location.href=o+"&locate="+encodeURIComponent(n),setTimeout(function(){i.find(".login").show()},1e3),void 0}r(i),i.find(".main_wraper").css("padding","0"),i.find(".login_form").show(),i.find(".ifm").attr("src",o)}function s(e){e.find(".main_wraper").css("padding","0 15px"),e.find(".login").show(),e.find(".login_form").hide(),e.find(".poco_login").hide(),e.find('[data-to_login="poco"]').show(),l(e)}function l(e){e.find(".login_header").show(),e.find(".reg_header").hide()}function r(e){e.find(".reg_header").show(),e.find(".login_header").hide()}var c={transition_type:"slide",dom_not_cache:!0,ignore_exist:!0};c.initialize=function(){this.render()},c.render=function(){var i=e("get_template"),n=i.template_obj(),t=n.login;this.$el.append(a(t))};var _=!1;c.events={"tap .ui-btn-prev-wrap":function(){t.back()},"tap [data-to_login]":function(e){var n=a(e.currentTarget).attr("data-to_login"),t=new Image;t.src="http://imgtj.poco.cn/pocotj_touch.css?url=touch://mpoco/mobile/"+n+"_login?tmp="+(new Date).getTime(),i(n,p)},"tap [data-to_login_page]":function(){s(p)},"tap [data-login_btn]":function(e){var i=p.find("[data-login_user_id]"),s=p.find("[data-login_user_pwd]"),l=a(e.currentTarget);return""==i.val()||""==s.val()?(o.show({text:"\u7528\u6237\u53f7\u7801\u6216\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",type:"info",append_target:p,auto_close_time:2e3}),void 0):(_||(_=!0,l.find("span").text("\u767b\u5f55\u4e2d..."),d.send_request({url:n.ajax_url.login,data:{account:i.val(),password:s.val(),t:parseInt((new Date).getTime())},callback:function(e){200==e.result?e.user_id>0&&(o.show({text:"\u767b\u5f55\u6210\u529f",auto_close_time:2e3}),d.set_local_poco_id(e.user_id),d.set_mmk(e.mmk),n.is_login_flag=!0,s.blur(),d.update_ps_record(),d.bind_poco_in_camera(),setTimeout(function(){v&&v.url_form_frineds?top.location.href=v.url_form_frineds:t.back()},500),_=!1):(o.show({text:e.err_msg,type:"info",auto_close_time:2e3}),_=!1),l.find("span").text("\u767b\u5f55")},error:function(){_=!1,l.find("span").text("\u767b\u5f55"),o.show({text:"\u767b\u5f55\u5931\u8d25",type:"info",auto_close_time:2e3})}})),void 0)}},c.page_before_show=function(e){e.$el.find(".main_wraper").show()};var m,p,v;c.page_init=function(s,l,r){if("undefined"!=typeof WeixinJSBridge){s.$el.find(".login").hide(),o.show({text:"\u5fae\u4fe1\u767b\u5f55",type:"loading"});var c=t.page_history(),_=c[c.length-1];d.is_empty(_)&&(_=d.get_target_refresh_url_by_hash_name());var f=_.indexOf("#"),g=_.substr(f+1);return g=encodeURIComponent(g),top.location.href="http://m.poco.cn/mobile/action/create_weixin_oauth.php?locate_hash="+g,void 0}p=a(s.el),v=r;var h=e("scroll"),u=a(s.el).find(".main_wraper");m=h.new_scroll(u,{view_height:d.container_height_with_head()});var b=a(s.el).find("header"),w=e("page_back_btn")();b.prepend(w.$el),s.$el.find(".no_authorize").css("height",d.container_height_with_head()),window.onmessage=function(e){o.show({text:"\u767b\u5f55\u6210\u529f",auto_close_time:2e3});var i=JSON.parse(e.data),a=i.poco_id;console.log("\u767b\u5f55\u540e\u8fd4\u56de\u7684id\uff1a"+a),d.set_local_poco_id(a),a>0&&(n.is_login_flag=!0),v&&v.url_form_frineds?top.location.href=v.url_form_frineds:t.back()};var y=l[0];if(y){var x=v&&v.url_form_frineds?v.url_form_frineds:!1;i(y,p,x)}};var f=e("page").new_page(c);return f}}),define("wo/fans",["base_package","frame_package","btn_package","wo_config","commom_function","user_list_view","user_list_controler","user_list_collection"],function(e,i){var a=e("zepto"),n=e("wo_config"),t=e("page_control");e("backbone");var d=e("commom_function");e("mustache"),i.route={"fans/:query":"fans"},i.new_page_entity=function(){function i(){w.clear_list(),m.each(function(e){var i=new p({model:e,tpl_type:"fans"});w.add_list_item(i)}),g.scroll_to(0),s()}function o(e){var i=new p({model:e,tpl_type:"fans"});w.add_list_item(i)}function s(){var e=h.find(".border-btm").length,i=h.find(".main_wraper"),a=h.find(".no_data");f==u[0]&&(0>=e?(a.show(),i.hide()):(a.hide(),i.show()))}var l={route:{"fans/:query":"fans"},transition_type:"slide",dom_not_cache:!0,ignore_exist:!0},r=20,c={ajax_load_finish:function(e,i){w.more_btn_reset(),y.reset(),null!=i&&(0==i||r>i.length)&&w.hide_more_btn()},before_refresh:function(){y.loadding()},before_get_more:function(){w.more_btn_loading()}},_=e("user_list_collection"),m=_({url:function(){return n.ajax_url.fans_list+"?user_id="+u[0]},refresh:function(){d.collection_refresh_function.call(this,c)},get_more_item:function(){var e=this;c.data={order_key:e.models[e.models.length-1].attributes.order_ukey},d.collection_get_more_function.call(this,c)}}),p=e("user_list_view"),v=e("user_list_controler");l.initialize=function(){this.render()},l.render=function(){var e='<div class="wrap-box"><header class="header font_wryh clearfix"><h3 class="tc"><span class="user_title"><label></label><span style="display: inline-block;overflow: hidden;">\u7684\u7c89\u4e1d</span></span></h3></header><div class="content-25 no_data" style="height: 390px;display:none"><div class="me-page-nologin font_wryh"><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><div class="no_fans" style="text-align:left;line-height: 26px;width:300px;margin:0 auto"><p>\u83b7\u5f97\u7c89\u4e1d\u5c0f\u8d34\u58eb\uff1a</p><p>1\u3001\u591a\u5206\u4eab\u7247\u5230POCO\u3002</p><p>2\u3001\u591a\u5173\u6ce8\u5176\u4ed6\u7528\u6237\uff0c\u559c\u6b22\u5bf9\u65b9\u7684\u7167\u7247\u548c\u8ba4\u771f\u4ea4\u6d41\u3002</p><p>3\u3001\u7ed1\u5b9a\u65b0\u6d6a\u5fae\u535a\u548c\u817e\u8baf\u5fae\u535a\uff0c\u5bfb\u627e\u81ea\u5df1\u8eab\u8fb9\u7684\u597d\u53cb\u3002</p></div></td></tr></tbody></table></div></div><div class="content-10 main_wraper"><div class="attention-page font_wryh" style="padding-top:45px;"><div class="list-comment-item"></div></div></div></div>';this.$el.append(a(e))},l.events={"tap .ui-btn-refresh-wrap":function(){return t.page_transit_status()?!1:(m.refresh(),void 0)},"tap .ui-btn-prev-wrap":function(){t.back()},swiperight:function(){d.get_ua().is_uc||t.back()},"tap .data-more_btn":function(){return t.page_transit_status()?!1:(m.get_more_item(),void 0)}};var f,g,h,u,b,w,y;l.page_init=function(n,t,s){h=a(n.el),u=t,b=s,y=e("refresh_btn")(),n.$el.find(".header").append(y.$el);var l=e("scroll"),r=a(n.el).find(".main_wraper");g=l.new_scroll(r,{view_height:d.container_height_with_head()});var c=a(n.el).find("header"),_=e("page_back_btn")();c.prepend(_.$el),f=d.get_local_poco_id(),w=new v({el:a(n.el).find(".list-comment-item")}),m.bind("reset",i,n),m.bind("add",o,n),m.refresh(),b.nick_name?(console.log(b.nick_name),h.find("[data-follows]").html(b.num),h.find(".user_title label").html(b.nick_name)):h.find(".user_title label").html("\u6211"),b.num||h.find(".title").hide()},l.window_change=function(e){a(e.el).find(".main_wraper").height(d.container_height_with_head())};var x=e("page").new_page(l);return x}}),define("wo/follow",["base_package","frame_package","btn_package","wo_config","commom_function","user_list_view","user_list_controler","user_list_collection"],function(e,i){var a=e("zepto"),n=e("wo_config"),t=e("page_control");e("backbone");var d=e("commom_function");e("mustache"),i.route={"follow/:query":"follow"},i.new_page_entity=function(){function i(){w.clear_list(),m.each(function(e){var i=new p({model:e,tpl_type:"follow"});w.add_list_item(i)}),g.scroll_to(0),s()}function o(e){var i=new p({model:e,tpl_type:"follow"});w.add_list_item(i)}function s(){var e=h.find(".border-btm").length,i=h.find(".main_wraper"),a=h.find(".no_data");f==u[0]&&(0>=e?(a.show(),i.hide()):(a.hide(),i.show()))}var l={route:{"follow/:query":"follow"},transition_type:"slide",dom_not_cache:!0,ignore_exist:!0},r=20,c={ajax_load_finish:function(e,i){w.more_btn_reset(),y.reset(),null!=i&&(0==i||r>i.length)&&w.hide_more_btn()},before_refresh:function(){y.loadding()},before_get_more:function(){w.more_btn_loading()}},_=e("user_list_collection"),m=_({url:function(){return n.ajax_url.follow_list+"?user_id="+u[0]},refresh:function(){d.collection_refresh_function.call(this,c)},get_more_item:function(){var e=this;c.data={order_key:e.models[e.models.length-1].attributes.order_ukey},d.collection_get_more_function.call(this,c)}}),p=e("user_list_view"),v=e("user_list_controler");l.initialize=function(){this.render()},l.render=function(){var e='<div class="wrap-box"><header class="header font_wryh clearfix"><h3 class="tc"><span class="user_title"><label></label><span style="display: inline-block;overflow: hidden;">\u7684\u5173\u6ce8</span></span></h3></header><div class="content-25 no_data" style="height: 390px;display:none"><div class="me-page-nologin font_wryh"><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><div style="text-align:left;line-height: 26px;width: 100%;text-align: center;"><p>\u4f60\u8fd8\u672a\u5173\u6ce8\u4efb\u4f55\u4eba</p><p>\u70b9\u6b64\u5bfb\u627e\u66f4\u591a\u597d\u53cb\u548c\u5173\u6ce8POCO\u8fbe\u4eba</p></div></td></tr></tbody></table></div></div><div class="content-10 main_wraper"><div class="attention-page font_wryh" style="padding-top:45px;"><div class="list-comment-item"></div></div></div></div>';this.$el.append(a(e))},l.events={"tap .ui-btn-refresh-wrap":function(){return t.page_transit_status()?!1:(m.refresh(),void 0)},"tap .ui-btn-prev-wrap":function(){t.back()},swiperight:function(){d.get_ua().is_uc||t.back()},"tap .data-more_btn":function(){return t.page_transit_status()?!1:(m.get_more_item(),void 0)},"tap .no_data":function(){return t.page_transit_status()?!1:(t.navigate_to_page("recommend"),void 0)}};var f,g,h,u,b,w,y;l.page_init=function(n,t,s){h=a(n.el),u=t,b=s,f=d.get_local_poco_id(),y=e("refresh_btn")(),n.$el.find(".header").append(y.$el);var l=e("scroll"),r=a(n.el).find(".main_wraper");g=l.new_scroll(r,{view_height:d.container_height_with_head()});var c=a(n.el).find("header"),_=e("page_back_btn")();c.prepend(_.$el),w=new v({el:a(n.el).find(".list-comment-item")}),m.bind("reset",i,n),m.bind("add",o,n),m.refresh(),b.nick_name?(h.find("[data-follows]").html(b.num),h.find(".user_title label").html(b.nick_name)):h.find(".user_title label").html("\u6211"),b.num||h.find(".title").hide()},l.window_change=function(e){a(e.el).find(".main_wraper").height(d.container_height_with_head())};var x=e("page").new_page(l);return x}}),define("wo/like_photo_list",["base_package","btn_package","frame_package","commom_function","wo_config","new_alert_v2","world_list_module"],function(e,i){var a=e("zepto"),n=e("page_control");e("backbone");var t=e("commom_function"),d=e("wo_config"),o=e("new_alert_v2");i.route={like_photo_list:"like_photo_list"},i.new_page_entity=function(){var i={route:{like_photo_list:"like_photo_list"},transition_type:"slide",dom_not_cache:!0};i.initialize=function(){this.render()},i.render=function(){var e='<header class="header clearfix"><h3 class="tc"  >\u6211\u559c\u6b22\u7684\u7167\u7247</h3></header><div class="content-25 no_data" style="display:none"><div class="me-page-nologin font_wryh"><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><div style="text-align:left;line-height: 26px;width: 100%;text-align: center;"><p>\u9a6c\u4e0a\u5230\u7cbe\u9009\u680f\u76ee\uff0c\u559c\u6b22\u51e0\u5f20\u7167\u7247\uff0c\u8ba9\u62cd\u6444\u8005\u5f00\u5fc3\u4e00\u4e0b</p></div></td></tr></tbody></table></div></div><div class="content-10 main_wraper"><div style="padding-top:45px;"><div  style="overflow:hidden;position:relative;z-index: 1;"><div style="-webkit-transform:translateZ(0px);" ></div></div><div class="main_container"></div></div></div>';this.$el.html(e)},i.events={"tap .ui-btn-prev-wrap":function(){n.back()},swiperight:function(){t.get_ua().is_uc||n.back()},"tap .ui-btn-refresh-wrap":function(){return n.page_transit_status()?!1:(c.start_reset(),void 0)}},i.window_change=function(e){a(e.el).find(".main_wraper").height(t.container_height_with_head()),a(e.el).find(".photowall_item img").css({height:"auto"})};var s,l,l,r,c;i.page_init=function(i){var _=t.get_local_poco_id();if(0>=_)return o.show({text:"\u5c1a\u672a\u767b\u5f55",type:"info",is_fade:!1,is_cover:!0,auto_close_time:1e3,closed_callback:function(){n.back()}}),!1;r=a(i.el),s=e("refresh_btn")(),i.$el.find(".header").append(s.$el);var m=a(i.el).find(".main_wraper"),p=e("scroll");l=p.new_scroll(m,{view_height:t.container_height_with_head(),use_lazyload:!0});var v=a(i.el).find("header"),f=e("page_back_btn")();v.prepend(f.$el);var g=e("world_list_module")();c=new g({url:d.ajax_url.like_photo_list,list_type:"photowall",main_container:a(i.el).find(".main_container"),onloading:function(){s.loadding()},onreset:function(){s.reset(),l.scroll_to(0),r.$el&&r.$el.find("header").animate({translate3d:"0px, 0px, 0px"},0,"ease-in"),t.page_pv_stat_action()}}),c.start_reset()};var _=e("page").new_page(i);return _}}),"function"==typeof process_add&&process_add();
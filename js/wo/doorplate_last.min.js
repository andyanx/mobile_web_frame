define("wo/doorplate_last",["base_package","frame_package","btn_package","commom_function","wo_config","get_template","footer_view"],function(e,t){var i=e("zepto"),a=e("page_control"),n=e("backbone"),o=e("commom_function"),r=e("wo_config"),l=e("new_alert_v2");t.route={"doorplate_last/:query(/:user_id)":"doorplate_last"},t.new_page_entity=function(){function t(e){var t=e.attributes[0],a=t.name,n=t.rule_list,o=t.finish_status,r=t.big_photo,l=t.level,_=t.nickname,c=t.max_level,p=t.is_have_doorplate,h="";console.log(n),i(n).each(function(e,t){console.log(t),h+=t+"<br>"}),g!=v&&(o=l>0?_+"\u5f53\u524d\u5904\u4e8eLv"+l:_+""+o),0!=p&&l>0&&(d.find(".progress_container_position").show(),d.find("[data-level_num]").html("Lv."+l),s({cur_lv:l,total_lv:c})),d.find("[data-doorplate_name]").html(a),d.find("[data-condition]").html(h),d.find("[data-doorplate_icon]").attr("src",r),d.find("[data-current_progress]").html(o)}function s(e){var e=e||{},t=parseInt(e.cur_lv)||0,i=parseInt(e.total_lv)||5,a=(e.speed||0,e.callback||function(){},null==e.aninmate?!0:!1);if(t>i)return alert("\u5f53\u524d\u7ea7\u522b\u4e0d\u80fd\u8d85\u8fc7\u603b\u7ea7\u522b"),void 0;d.find(".progress_container");var n=d.find(".progress_val"),o=0;if(a){var r=parseInt(100*(t/i));setTimeout(function(){n.animate({width:r+"%"},300,"ease")},300)}else o=parseInt(100*(t/i)),n.css("width",o+"%")}var _,d,c={transition_type:"slide",dom_not_cache:!0};c.initialize=function(){this.render()},c.render=function(){var e='<div class="wrap-box"><header class="header font_wryh clearfix"><h3 class="clearfix" style="display:inline-block;width:100%;text-align:center"><span class="pl20"><label data-doorplate_name></label>\u95e8\u724c</span></h3></header><div class="content-10 main_wraper" style="padding: 0 10px;"><div style="padding-top:45px;"><div class="doorplate_last pt10 pb10 font_wryh" style="position:relative"><div class="content font_wryh " id="container" style="padding:20px;background:#fff;position:relative;text-align: center;-webkit-border-bottom-left-radius: 0;-webkit-border-bottom-right-radius: 0;"><table border="0" cellspacing="0" cellpadding="0" style="width:100%;text-align:center" class="bolder"><tr><td><div style="display: inline-block;width:200px;height:120px" class="mt10"><img style="max-width: 100%;" src="" data-doorplate_icon/><div class="progress_container_position " style="display:none"><table border="0" cellspacing="0" cellpadding="0" style="width: 100%;"><tbody><tr><td><div class="progress_container " style="width:150px;display:inline-block"><div class="progress_val " ></div></div></td><td width="26"><span data-level_num class="fwn" style="font-family: Tahoma;font-size: 10px;width: 25px;">Lv.0</span></td></tr></tbody></table></div></div></td></tr><tr><td><div style="display: inline-block;margin:20px 0 0 0"><label data-doorplate_name></label>\u95e8\u724c</div></td></tr></table></div><div class="content font_wryh " style="padding:20px;background:#fff;position:relative;text-align: left;border-top:1px solid #e6e6e6;-webkit-border-top-left-radius: 0;-webkit-border-top-right-radius: 0;"><div class="bolder" style="font-weight:bolder">\u83b7\u5f97\u6761\u4ef6:</div><div class="condition" data-condition></div><br/><div class="bolder" style="font-weight:bolder">\u5f53\u524d\u8fdb\u5ea6:</div><div class="current_progress" data-current_progress></div></div></div></div></div></div>ryh " style="padding:20px;background:#fff;position:relative;text-align: left;border-top:1px solid #e6e6e6;-webkit-border-top-left-radius: 0;-webkit-border-top-right-radius: 0;"><div class="bolder" style="font-weight:bolder">\u83b7\u5f97\u6761\u4ef6:</div><div class="condition" data-condition></div><br/><div class="bolder"><img src="http://my.poco.cn/medal/common/images/2231978884_fw8xdic6_big.png" /> \u5f53\u524d\u8fdb\u5ea6:</div><div class="current_progress" data-current_progress></div></div></div></div></div></div>';this.$el.append(i(e))},c.events={"tap .ui-btn-prev-wrap":function(){a.back()},swiperight:function(){o.get_ua().is_uc||a.back()}},c.window_change=function(e){i(e.el).find(".main_wraper").height(o.container_height_with_head())};var p=n.Model.extend({defaults:{},url:r.ajax_url.get_doorplate_last,parse:function(e){return e&&e.result_data!==void 0?e.result_data:e}});c.page_before_show=function(e){i(e.el).find(".main_wraper").height(o.container_height_with_head())};var h,f,u,m,g,v;c.page_init=function(a,n,r){d=i(a.el),f=n,u=r;var s=i(a.el).find(".main_wraper"),c=e("scroll");_=c.new_scroll(s,{view_height:o.container_height_with_head()});var b=i(a.el).find("header"),w=e("page_back_btn")();b.prepend(w.$el),m=l.show({text:"\u6b63\u5728\u52a0\u8f7d",type:"loading",append_target:d}),g=o.get_local_poco_id(),h=new p,h.bind("change",t,a),v=o.is_empty(f[1])?o.get_local_poco_id():f[1],h.fetch({type:"GET",data:{user_id:v,doorplate_id:f[0],t:parseInt((new Date).getTime())},success:function(){m.close()},error:function(){m.close()}})};var b=e("page").new_page(c);return b}}),"function"==typeof process_add&&process_add();
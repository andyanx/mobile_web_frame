define("wo/invite_fans",["base_package","btn_package","frame_package","wo_config","commom_function","user_list_view","user_list_controler","user_list_collection"],function(e,i){var a=e("zepto"),n=e("wo_config"),t=e("page_control");e("backbone");var d=e("commom_function");e("mustache"),i.route={"invite_fans/:query":"invite_fans"},i.new_page_entity=function(){function i(){b.clear_list(),_.each(function(e){if("1"==e.attributes.is_open_wo)return!1;var i=new p({model:e,tpl_type:"invite",poco_id:y});b.add_list_item(i)}),g.scroll_to(0)}function s(e){if("1"==e.attributes.is_open_wo)return!1;var i=new p({model:e,tpl_type:"invite",poco_id:y});b.add_list_item(i)}function o(){f.find(".main_wraper").hide(),f.find(".over_time_sina").css("display","table"),b.hide_more_btn(),w.$el.hide()}var l={route:{"invite_fans/:query":"invite_fans"},transition_type:"slide",dom_not_cache:!0,ignore_exist:!0},r=50,c={ajax_load_finish:function(e,i){if(b.more_btn_reset(),w.reset(),null!=i){var a=h[0];if("sina"==a){if(i.over_time&&1==i.over_time)return f.find(".over_time_sina div").html("\u6b64\u65b0\u6d6a\u5fae\u535a\u8d26\u53f7\u5df2\u8fc7\u671f\uff0c\u8bf7\u70b9\u51fb\u8fdb\u884c\u91cd\u65b0\u7ed1\u5b9a\u3002"),o(),void 0;if(0>=i.length)return f.find(".over_time_sina div").html("\u5c1a\u672a\u7ed1\u5b9a\u65b0\u6d6a\u5fae\u535a\u8d26\u53f7\uff0c\u8bf7\u70b9\u51fb\u8fdb\u884c\u7ed1\u5b9a\u3002"),o(),void 0;f.find(".main_wraper").show(),f.find(".over_time_sina").hide()}else{if(0>=i.length)return f.find(".over_time_sina div").html("\u5c1a\u672a\u7ed1\u5b9a\u817e\u8baf\u5fae\u535a\u8d26\u53f7\uff0c\u8bf7\u70b9\u51fb\u8fdb\u884c\u7ed1\u5b9a\u3002"),o(),void 0;if(!i)return f.find(".over_time_sina div").html("\u60a8\u7684\u817e\u8baf\u5fae\u535a\u5c1a\u672a\u6709\u597d\u53cb\u3002"),o(),void 0;f.find(".main_wraper").show(),f.find(".over_time_sina").hide()}(0==i||r>i.length)&&b.hide_more_btn()}},before_refresh:function(){w.loadding()},before_get_more:function(){b.more_btn_loading()}},m=e("user_list_collection"),_=m({url:function(){return n.ajax_url.invite_friend_list+"?account_type="+h[0]},refresh:function(){d.collection_refresh_function.call(this,c)},get_more_item:function(){var e=this;c.data={order_key:e.models[e.models.length-1].attributes.order_ukey},d.collection_get_more_function.call(this,c)}}),p=e("user_list_view"),v=e("user_list_controler");l.initialize=function(){this.render()},l.render=function(){var e='<div class="wrap-box"><header class="header font_wryh clearfix"><h3 class="tc" ><span class="fwn">\u9080\u8bf7\u597d\u53cb</span></h3></header><div class="over_time_sina font_wryh" style="font-size: 14px; text-align: center; display: none; width: 100%; height: 95%;"><div style="display: table-cell;padding:0 20px;text-align: center;vertical-align: middle;"></div></div><div class="content-padding0 main_wraper" style="display:none"><div class="request-firend font_wryh" style="padding-top:45px"><div class="title" data-title_txt>\u9080\u8bf7\u65b0\u6d6a\u5fae\u535a\u7684\u597d\u53cb\u52a0\u5165</div><div class="list-comment-item"></div></div></div></div>';this.$el.append(a(e))},l.events={"tap .ui-btn-refresh-wrap":function(){return t.page_transit_status()?!1:(_.refresh(),void 0)},"tap .ui-btn-prev-wrap":function(){t.back()},swiperight:function(){d.get_ua().is_uc||t.back()},"tap .data-more_btn":function(){return t.page_transit_status()?!1:(_.get_more_item(),void 0)},"tap .over_time_sina":function(){return t.page_transit_status()?!1:(t.navigate_to_page("setup"),void 0)}},l.page_show=function(e){f=a(e.el)};var g,f,h,u,b,w,y;l.page_init=function(n,t,o){f=a(n.el),h=t,u=o,y=d.get_local_poco_id();var l="sina"==t[0]?"\u9080\u8bf7\u65b0\u6d6a\u5fae\u535a\u7684\u597d\u53cb\u52a0\u5165":"\u9080\u8bf7\u817e\u8baf\u5fae\u535a\u7684\u597d\u53cb\u52a0\u5165";f.find("[data-title_txt]").html(l),w=e("refresh_btn")(),n.$el.find(".header").append(w.$el);var r=a(n.el).find("header"),c=e("page_back_btn")();r.prepend(c.$el);var m=e("scroll"),p=a(n.el).find(".main_wraper");g=m.new_scroll(p,{view_height:d.container_height_with_head()}),b=new v({el:a(n.el).find(".list-comment-item")}),_.bind("reset",i,n),_.bind("add",s,n),_.refresh()},l.window_change=function(e){a(e.el).find(".main_wraper").height(d.container_height_with_head())};var x=e("page").new_page(l);return x}});
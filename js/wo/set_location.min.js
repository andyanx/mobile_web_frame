define("wo/set_location",["base_package","frame_package","btn_package","commom_function","wo_config","get_template","footer_view"],function(e,i){var a=e("zepto"),t=e("page_control"),n=e("backbone"),d=e("commom_function");e("wo_config");var o=e("mustache"),s=e("new_alert_v2");i.route={set_location:"set_location"},i.new_page_entity=function(){function i(e){var i=e.province,a=m.find("[data-province_list] [data-location_list]");if(a.html(""),b&&!b.from_edit_page){var t=new g({no_choice_item:!0});a.append(t.$el)}for(var n=0;i.length>n;n++){var d=new g({data:i[n]});a.append(d.$el)}}function l(){m.find("[data-city_list]").hide(),m.find("[data-province_list]").show(),m.find("[data-back_to_province]").hide(),y.$el.show()}function r(e){m.find("[data-city_list]").show(),m.find("[data-province_list]").hide(),m.find("[data-back_to_province]").show(),y.$el.hide(),c(e)}function c(e){var e=e,i=h.city[e],a=m.find("[data-city_list] [data-location_list]");a.html("");for(var t=0;i.length>t;t++){var n=new v({data:i[t]});a.append(n.$el)}_.scroll_to(0)}var _,m,p=!0,f={transition_type:"slide",dom_not_cache:!0};f.initialize=function(){this.render()};var h,g=n.View.extend({tagName:"div",className:"items",initialize:function(){var e=this;e.render()},render:function(){if(this.options.no_choice_item)var e='<div class="input-box" data-to_city="1" ><table border="0" cellspacing="0" cellpadding="0" class="reset_table"><tbody><tr><td style="width: 100%;">\u4e0d\u9009\u62e9</td></tr></tbody></table></div>';else{var i=this.options.data;this.id=i.id,this.name=i.name;var e='<div class="input-box" data-to_city ><table border="0" cellspacing="0" cellpadding="0" class="reset_table"><tbody><tr><td style="width: 100%;">{{name}}</td></tr></tbody></table></div>'}var t=o.to_html(e,i);a(this.el).html(t)},events:{"tap [data-to_city]":function(){var e=this;if(!this.id){if(null!=b){var i="";b.from_edit_page||(i="\u6240\u6709\u5730\u533a"),b.edit_location_obj.attr({"data-province_id":0,"data-city_id":0}).val(i)}return t.back(),void 0}x=e,r(this.id),setTimeout(function(){p=!1},500)}}}),v=n.View.extend({tagName:"div",className:"items",initialize:function(){var e=this;e.render()},render:function(){var e=this.options.data;this.id=e.id,this.name=e.name;var i='<div class="input-box" data-to_city ><table border="0" cellspacing="0" cellpadding="0" class="reset_table"><tbody><tr><td style="width: 100%;">{{name}}</td></tr></tbody></table></div>',t=o.to_html(i,e);a(this.el).html(t)},events:{"tap [data-to_city]":function(){if(!p){var e=this,i=x.name,a=x.id,n=e.id,d=e.name;if(i==d)var o=d;else var o=i+" "+d;null!=b&&b.edit_location_obj.attr({"data-province_id":a,"data-city_id":n}).val(o),t.back()}}}});f.render=function(){var e='<div class="wrap-box"><header class="header font_wryh clearfix"><div style="display:none;left: 5px;" data-back_to_province class="ui-btn-header-wrap "><div class="ui-btn-header ui-btn-prev radius-2px"><span class="icon icon-arrow icon-bg-common"></span></div></div><h3 class="clearfix" style="display:inline-block;width:100%;text-align:center"><span class=""><label data-nick_name></label>\u5730\u533a\u8bbe\u7f6e</span></h3></header><div class="content-10 main_wraper" style="padding: 0 10px;"><div class="set_location_list mt10 font_wryh" style="position:relative;padding-top:45px;padding-bottom:20px"><div data-province_list class="font_wryh clearfix" id="container" style="visibility:hidden;background:#fff;position:relative"><div data-location_list></div></div><div data-city_list class="font_wryh clearfix" id="container" style="display:none;position:relative"><div data-location_list></div></div></div></div></div>';this.$el.append(a(e))},f.events={"tap .ui-btn-prev-wrap":function(){t.back()},swiperight:function(){d.get_ua().is_uc||t.back()},"click [data-back_to_province]":function(){l()}},f.window_change=function(e){a(e.el).find(".main_wraper").height(d.container_height_with_head())},f.page_before_show=function(e){a(e.el).find(".main_wraper").height(d.container_height_with_head())};var u,m,b,w,y,x,h;f.page_init=function(n,o,l){m=a(n.el),u=o,b=l,w=u[0]?u[0]:d.get_local_poco_id();var r=a(n.el).find(".main_wraper"),c=e("scroll");_=c.new_scroll(r,{view_height:d.container_height_with_head()});var p=a(n.el).find("header");return y=e("page_back_btn")(),p.prepend(y.$el),null!=b&&null==b.edit_location_obj?(setTimeout(function(){t.back()},1e3),!1):(e.async("get_location_data",function(e){return null==e?(s.show({text:"\u52a0\u8f7d\u5931\u8d25",type:"info",is_fade:!1,is_cover:!0,auto_close_time:1e3,closed_callback:function(){t.back()}}),!1):(i(e),h=e,void 0)}),void 0)};var k=e("page").new_page(f);return k}}),"function"==typeof process_add&&process_add();
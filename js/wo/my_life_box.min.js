define("wo/my_life_box",["base_package","frame_package","btn_package","commom_function","wo_config","get_template","footer_view","new_alert_v2","img_process","popup"],function(e,i){var a,n,t=e("zepto"),d=e("page_control"),o=e("backbone"),s=e("commom_function"),l=e("wo_config"),r=e("mustache"),c=e("new_alert_v2");i.route={my_life_box:"my_life_box"},i.new_page_entity=function(){function i(){u.find(".my-left-box-page .grid_box").html(""),w.each(function(e){var i=new g({model:e});b.add_list_item(i)}),_()}function _(){var e=parseInt((window.innerWidth-32)/3);u.find(".grid_box_container").width(e).height(e)}var m={transition_type:"slide",dom_not_cache:!0},p={ajax_load_finish:function(){a.close(),y.reset()},before_refresh:function(){a=c.show({text:"\u6b63\u5728\u52a0\u8f7d",type:"loading",is_cover:!0}),y.loadding()}},f=o.Model.extend({defaults:{}}),v=o.Collection.extend({model:f,url:function(){return l.ajax_url.my_life_grid_box},refresh:function(){s.collection_refresh_function.call(this,p)},parse:function(e){return e&&e.result_data!==void 0?e.result_data:e}}),g=o.View.extend({tagName:"div",className:"grid_box_container bdb-line",initialize:function(){var e=this;e.render()},events:{"tap [data-my_life_pic_box]":function(e){var i=this;t(e.currentTarget),d.navigate_to_page("choose_my_pic/"+i.tag_id,{font_cover_btn:i,cat_name:i.cat_name})}},render:function(){var e=this,i=this.model.toJSON();e.cat_name=i.cat_name,e.cat_count=i.cat_count,e.tag_id=i.cat_conf_id,i.cat_img&&(i.cat_img=s.matching_img_size(i.cat_img,"ss"));var a='{{#cat_img}}<img class="my_life_img" src="{{cat_img}}"><div class="num_container"><span data-cat_count>{{cat_count}}</span></div><div class="grid_box_txt"><div data-grid_box_txt>{{cat_name}}</div></div>{{/cat_img}}{{^cat_img}}<table class="has_cover_container" cellspacing="0" cellpadding="0" border="0" width="100%" height="100%"><tr><td align="center" valign="middle"><div class="add_container"><div class="add_icon icon-bg-common"></div><div data-grid_box_txt class="txt">{{cat_name}}</div></div></td></tr></table>{{/cat_img}}',n=r.to_html(a,i);t(this.el).html(n),t(this.el).attr({"data-my_life_pic_box":""}),i.cat_img||t(this.el).addClass("white_container")},set_font_cover_img:function(e,i,a){var n=this;a>0?(e?t(this.el).html('<img class="my_life_img" src="'+e+'"><div class="num_container"><span data-cat_count>'+a+'</span></div><div class="grid_box_txt"><div data-grid_box_txt>'+i+"</div></div>"):t(this.el).find("[ data-cat_count]").html(a),n.cat_count=a):(t(this.el).html('<table class="has_cover_container" cellspacing="0" cellpadding="0" border="0" width="100%" height="100%"><tr><td align="center" valign="middle"><div class="add_container"><div class="add_icon icon-bg-common"></div><div data-grid_box_txt class="txt">'+i+"</div></div></td></tr></table>"),t(this.el).addClass("white_container"))}}),h=o.View.extend({initialize:function(){},add_list_item:function(e){t(this.el).append(e.$el)}});m.initialize=function(){this.render()},m.render=function(){var i=e("get_template");i.template_obj();var a='<div class="wrap-box my_grid_life_wrap"><header class="my_grid_life_header header font_wryh clearfix"><h3 class="tc"><span class="user_title"><label></label><span style="display: inline-block;overflow: hidden;">\u6211\u7684\u751f\u6d3b\u4e5d\u5bab\u683c</span></span></h3></header><div class="content-8 main_wraper"><div class="my-left-box-page font_wryh" style="padding-top:45px;"><div class="banner_tips tips bdb-line"><table cellspacing="0" cellpadding="0" border="0" width="100%"><tr><td align="center" valign="middle"><div class="tips_icon icon-bg-common"></div></td><td><div class="tips_content">\u5728\u4e2a\u4eba\u4e3b\u9875\u4e0a\uff0c\u7528\u6700\u597d\u7684\u7167\u7247\u5c55\u793a\u6211\u7684\u751f\u6d3b\u3002</div></td></tr></table></div><div class="grid_box"></div></div></div></div>';this.$el.append(t(a))},m.events={"tap .ui-btn-prev-wrap":function(){d.back()},swiperight:function(){s.get_ua().is_uc||d.back()},"tap .ui-btn-refresh-wrap":function(){return d.page_transit_status()?!1:(w.refresh(),void 0)}};var u,b,w,y;m.page_back_show=function(){w.refresh()},m.window_change=function(){u.find(".main_wraper").height(s.container_height_with_head()),_()},m.page_init=function(a){window.localStorage.setItem("my_grid_point",1),u=t(a.el);var d=t(a.el).find(".my_grid_life_header"),o=e("page_back_btn")();d.prepend(o.$el),y=e("refresh_btn")(),a.$el.find(".header").append(y.$el);var l=t(a.el).find(".main_wraper"),r=e("scroll");n=r.new_scroll(l,{view_height:s.container_height_with_head()}),b=new h({el:t(a.el).find(".my-left-box-page .grid_box")}),w=new v,w.bind("reset",i,a),w.refresh()};var x=e("page").new_page(m);return x}});
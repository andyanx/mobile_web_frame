define("wo/theme_act",["base_package","frame_package","btn_package","commom_function","wo_config","get_template","new_alert_v2","show_big_img","select_module"],function(e,i){var a=e("zepto"),t=e("page_control"),n=e("backbone"),o=e("commom_function"),d=e("mustache"),s=e("wo_config"),l=e("new_alert_v2");e("iScroll"),i.route={theme_act:"theme_act"},i.new_page_entity=function(){function i(){h.clear_list(),p.each(function(e){var i=new $({model:e});h.add_list_item(i)}),setTimeout(function(){_.scroll_to(0)},50),c.$el&&c.$el.find("header").animate({translate3d:"0px, 0px, 0px"},0,"ease-in")}function r(e){var i=new $({model:e});h.add_list_item(i),console.log(11111)}var c,_,m,p,f,h,g=10,u=!1,v={title:"\u4e2a\u4eba\u4e3b\u9875",route:{theme_act:"theme_act"},transition_type:"slide",dom_not_cache:!0,ignore_exist:!0};v.initialize=function(){this.render()},v.render=function(){var e='<div class="theme_act_page font_wryh"><header class="header re tc fb">\u4e3b\u9898\u6d3b\u52a8<div class="ui-btn-header-wrap ui-btn-click-wrap" data-filter_in><div class="ui-btn-header ui-btn-filter ui-btn-click radius-2px"><label class="filter_text dib w-100 h-100 f12">\u7b5b\u9009</label></div></div></header><div class="main_wraper"><div style="padding-top:45px;"><div class="theme-act p10"><div class="theme-act-wrap"></div></div></div></div>';this.$el.append(a(e))};var b=e("select_module")(),w=new b({options_data:[{key:"",val:"\u5168\u90e8\u6d3b\u52a8"},{key:"\u81ea\u62cd",val:"\u81ea\u62cd"},{key:"\u65c5\u6e38",val:"\u65c5\u6e38"},{key:"\u7f8e\u98df",val:"\u7f8e\u98df"},{key:"\u840c\u5ba0",val:"\u840c\u5ba0"},{key:"\u73a9\u7269",val:"\u73a9\u7269"},{key:"\u6444\u5f71",val:"\u6444\u5f71"},{key:"\u73a9\u4e50",val:"\u73a9\u4e50"},{key:"\u6211\u7684\u57ce\u5e02",val:"\u6211\u7684\u57ce\u5e02"},{key:"\u5fc3\u60c5",val:"\u5fc3\u60c5"}],onchange:function(){var e=this.get_select_data();u=e.val,p.refresh()}}),y={ajax_load_finish:function(e,i,a,t){return m.close(),0==i&&h.return_paging_btn().hide(),null==i?(h.return_paging_btn().reset(),void 0):(t>1?h.return_paging_btn().open_pre_page_btn():h.return_paging_btn().ban_pre_page_btn(),0==i||g>i.length?h.return_paging_btn().ban_next_page_btn():h.return_paging_btn().open_next_page_btn(),void 0)},before_refresh:function(){m=l.show({text:"\u6b63\u5728\u52a0\u8f7d",type:"loading",append_target:c.$el})},before_get_more:function(){h.more_btn_loading()}},x=n.Model.extend({defaults:{}}),k=n.Collection.extend({model:x,url:function(){return s.ajax_url.theme_act},refresh:function(){y.data={tag_name:u},o.collection_refresh_function.call(this,y)},get_more_item:function(e){this.models.length>0&&!e?y.data={tag_name:u}:v.data={},o.collection_get_more_function.call(this,y,e)}}),$=n.View.extend({tagName:"div",className:"theme-act-item bdb-line p10 mb10 bgcfff radius-2px",initialize:function(){this.render()},events:{"tap .theme-act-item":function(){t.navigate_to_page("theme_pic_list/"+encodeURIComponent(this.title))}},render:function(){var e=this.model.toJSON();e.pic_size=f,this.title=e.title,this.user_count=parseInt(e.user_count),this.article_count=parseInt(e.article_count),1==e.status&&(e.on_going=1);for(var i=[],t=e.cover_img_list.length,n=0;t>n;n++){var s=e.cover_img_list[n];if(!o.is_empty(s)){var l=o.matching_img_size(s,"ss"),r="<img lazyload_src="+l+' class="img_buffer_bg fl mr10" style="width:{{pic_size}};height:{{pic_size}}" data_to_word />';i.push(r)}if(3==n)break}var c='<div class="clearfix"><div class="title f16 color333 fl">{{title}}</div>{{#on_going}}<div class="hot fl re radius-2px font-arial colorfff"><em class="hot_icon"></em>HOT</div>{{/on_going}}</div><p class="color999 mt5"><span class="font-arial">{{user_count}}</span>\u4eba\u53c2\u52a0\uff0c<span class="font-arial">{{article_count}}</span>\u5f20\u56fe\u7247</p><div class="img-list mt10 clearfix">'+i.join("")+"</div>",_=d.to_html(c,e);a(this.el).html(_)}});v.events={swiperight:function(){o.get_ua().is_uc||t.back()},"tap .ui-btn-refresh-wrap":function(){return t.page_transit_status()?!1:(p.refresh(),void 0)},"tap .ui-btn-prev-wrap":function(){t.back()},"tap .pre_paging_btn":function(){var e=h.return_paging_btn();return e.get_pre_page_btn_ban_mode()?!1:(p.get_more_item(!0),void 0)},"tap .next_paging_btn":function(){var e=h.return_paging_btn();return e.get_next_page_btn_ban_mode()?!1:(p.get_more_item(!1),void 0)},"tap [data-filter_in]":function(){w.open()}},v.window_change=function(e){a(e.el).find(".main_wraper").height(o.container_height_with_head()),f=parseInt((window.innerWidth-20-20-30)/4),a(e.el).find("[data_to_word]").css({width:f,height:f})},v.page_before_hide=function(){w.close()},v.page_init=function(t){c=t;var n=a(t.el).find(".main_wraper"),d=e("scroll");_=d.new_scroll(n,{view_height:o.container_height_with_head(),use_lazyload:!0});var s=a(t.el).find("header"),l=e("page_back_btn")();s.prepend(l.$el),p=new k,h=new z({el:a(t.el).find(".theme-act-wrap")}),p.bind("reset",i,t),p.bind("add",r,t),p.refresh()},f=parseInt((window.innerWidth-20-20-30)/4)+"px";var z=n.View.extend({initialize:function(){var i=this,t=e("paging_btn")();a(this.el).parent().append(t.$el),i.load_more_btn=t},add_list_item:function(e){var i=this;a(this.el).append(e.$el),i.load_more_btn.show()},clear_list:function(){a(this.el).html("")},return_paging_btn:function(){return this.load_more_btn},more_btn_loading:function(){this.load_more_btn.loadding()}}),j=e("page").new_page(v);return j}}),"function"==typeof process_add&&process_add();
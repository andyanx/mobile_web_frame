define("wo/module/photowall_controler",["base_package","get_template","load_more_btn","commom_function","wo_config","user_authorize"],function(e){var t=e("zepto"),n=e("backbone"),i=e("commom_function"),a=e("wo_config"),o=e("cookies"),r=e("user_authorize");return new_photowall_controler=function(s){var s=s||{},l={item_count:0,index_colume:"left",left_colume:{},right_colume:{},auth_banner_has_close:!1,initialize:function(){var n=this,a=e("get_template"),o=a.template_obj(),r=o.photo_wall_tb;if(t(this.el).html(r),i.have_partner_token()&&0>=parseInt(i.get_local_poco_id())){var s='<div class="add-item mt10 radius-4px re"><div class="txt f12">\u4ed6\u5728\u8fd9\u5206\u4eab\u751f\u547d\u8db3\u8ff9\uff0c\u5979\u5728\u8fd9\u4f20\u8fbe\u559c\u6012\u54c0\u4e50\uff0c\u8fd9\u4e2a\u4e16\u754c\u8fd8\u9700\u8981\u4f60\uff0c\u624d\u80fd\u66f4\u591a\u5f69\u3002</div><div class="ui-btn-register ui-btn-add mt15 mb15"><span class="radius-3px">\u9a6c\u4e0a\u52a0\u5165</span></div><p class="txt2">\u52a0\u5165\u540e\u4f60\u5728\u5176\u5b83\u7b2c\u4e09\u65b9\u5e73\u53f0\u7684POCO\u76f8\u673a\u7167\u7247\u4f1a\u5728\u6b64\u663e\u793a</p><div class="btn-close-wrap"><span class="btn-close radius-2px"><i class="icon-close icon-bg-common"></i></span></div></div>',l=t(s);l.hide(),n.auth_obj=l,t(this.el).prepend(l)}var d=e("load_more_btn")();t(this.el).append(d.$el),n.load_more_btn=d,this.left_colume=t(this.el).find(".left_colume"),this.right_colume=t(this.el).find(".right_colume")},events:{"tap .ui-btn-register":function(){var e=this;if(i.get_local_poco_id()>0)return e._close_auth_banner(),!1;var t=o.readCookie("poco_sns_psid"),n=o.readCookie("poco_sns_appname");i.send_request({url:a.ajax_url.accept_auth,data:{poco_sns_psid:t,poco_sns_appname:n},callback:function(t){t.poco_id>0&&(i.set_local_poco_id(t.poco_id),r.show_popup({name:t.partner_name+"/"+t.nickname}),e._close_auth_banner())}})},"tap .btn-close-wrap":"_close_auth_banner"},_close_auth_banner:function(){this.auth_banner_has_close=!0,this.$el.find(".add-item").hide()},add_photowall_item:function(e){var t=this,n=t.left_colume.height(),i=t.right_colume.height();i>=n?(t.left_colume.append(e.$el),t.index_colume="right"):(t.right_colume.append(e.$el),t.index_colume="left"),t.load_more_btn.show(),t.auth_obj&&!t.auth_banner_has_close&&t.auth_obj.show(),t.item_count++},clear_photowall:function(){this.index_colume="left",this.left_colume.html(""),this.right_colume.html(""),this.item_count=0,this.load_more_btn.hide()},hide_more_btn:function(){this.load_more_btn.hide()},more_btn_loading:function(){this.load_more_btn.loadding()},more_btn_reset:function(){this.load_more_btn.reset()}};l=t.extend(l,s);var d=n.View.extend(l);return new d}});
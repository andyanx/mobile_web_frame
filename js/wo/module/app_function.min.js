define("wo/module/app_function",["wo_config","base_package","ua","new_alert_v2","commom_function"],function(e,i){e("wo_config"),e("zepto"),e("new_alert_v2");var t=e("ua"),a=e("cookies"),n=e("commom_function");i.is_world_app=function(){return"undefined"!=typeof PocoWebViewJavascriptBridge},i.is_poco_app=function(){var e=a.readCookie("cok_framename");return null!=e&&""!=e?!0:!1},i.is_poco_app_and_android=function(){var e=this.is_poco_app()&&t.isAndroid;return e},i.is_poco_app_and_iphone=function(){var e=this.is_poco_app()&&t.isIDevice;return e},i.can_app_share=function(){var e=a.readCookie("poco_camera_ver"),i=this.is_world_app()||this.is_poco_app_and_android()&&e>="2.5.7"||this.is_poco_app_and_iphone()&&e>="2.5.8";return i},i.init_world_app_bridge=function(){window.PocoWebViewJavascriptBridge?PocoWebViewJavascriptBridge.init():document.addEventListener("WebViewJavascriptBridgeReady",function(){PocoWebViewJavascriptBridge.init()},!1)},i.app_get_picture=function(e,i){this.is_world_app()&&PocoWebViewJavascriptBridge.callHandler("PocoWorld.camera.getPicture",e,i)},i.save_device_token=function(){if(this.is_world_app()){var e=n.get_local_poco_id();e>0&&PocoWebViewJavascriptBridge.callHandler("PocoWorld.device.token",{},function(e){if("0000"==e.code){if(t.isIDevice)var i="ios";else var i="android";n.send_request({url:"http://m.poco.cn/mobile/action/save_device_token.php",data:{device_token:e.token,device_type:i}})}})}},i.app_share_setup=function(){this.is_world_app()&&PocoWebViewJavascriptBridge.callHandler("PocoWorld.partner.share.set",{},function(){})},i.app_share=function(e,i,t,a){var e=e;if(this.is_world_app()){switch(e){case"sina":e="weibo";break;case"qqweibo":e="tencent";break;case"qqzone":e="qzone";break;case"weixin":e="weixin"}var n="PocoWorld.partner.share."+e;PocoWebViewJavascriptBridge.callHandler(n,{shareImg:i,shareTxt:t,shareUrl:a},function(){})}else{switch(e){case"sina":t=t+" "+a;break;case"qqweibo":e="qq",t=t+" "+a;break;case"qqzone":e="qzone",t=t+" "+a;break;case"weixin":a=encodeURIComponent(a)}t=encodeURIComponent(t),window.location.href="PocoCamera://action_share/?shareplatform="+e+"&sharetxt="+t+"&shareimg="+i+"&sharelink="+a}},i.app_switch_mode=function(e){this.is_world_app()&&PocoWebViewJavascriptBridge.callHandler("PocoWorld.device.switchMode",{},e)},i.get_app_coordinate=function(e){this.is_world_app()&&PocoWebViewJavascriptBridge.callHandler("PocoWorld.location.coordinate",{},e)},i.get_package_ver=function(e){this.is_world_app()&&PocoWebViewJavascriptBridge.callHandler("PocoWorld.app.packageVer",{},e)}}),"function"==typeof process_add&&process_add();
define("wo/module/user_authorize",["base_package","frame_package","commom_function","wo_config"],function(e,t){var i=e("zepto"),a=e("backbone"),n=e("commom_function"),o=e("page_control"),s=e("wo_config"),d=e("cookies"),l=a.View.extend({className:"content-25 no_authorize",initialize:function(e){var e=e||{};this.auth_callback=e.auth_callback;var t='<div class="me-page-nologin font_wryh"><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td align="left"><p style="font-size:14px;text-align: center;">\u56fd\u5185\u6700\u4f18\u79c0\u7684\u624b\u673a\u751f\u6d3b\u56fe\u7247\u793e\u533a\uff0c\u4f60\u8fd8\u5728\u7b49\u4ec0\u4e48\uff1f\u52a0\u5165\u6211\u4eec\uff0c\u62cd\u904d\u4e16\u754c\u7cbe\u5f69\u3002</p><div class="ui-btn-register mt20" ><span class="radius-2px">\u9a6c\u4e0a\u52a0\u5165</span></div><p style="margin-top:20px;color:#aaa;text-align: center;">\u52a0\u5165\u540e\u4f60\u5728\u5176\u5b83\u5e73\u53f0\u7684POCO\u76f8\u673a\u7167\u7247\u4f1a\u5728\u6b64\u663e\u793a</p></td></tr></tbody></table></div>';this.$el.html(t),this.$el.hide()},authorize_show:function(){this.$el.show()},authorize_hide:function(){this.$el.hide()},events:{"tap .ui-btn-register":function(e){var t=this,a=i(e.currentTarget),o=d.readCookie("poco_sns_psid"),l=d.readCookie("poco_sns_appname");t.clicked||(t.clicked=!0,a.find("span").text("\u9a6c\u4e0a\u52a0\u5165..."),n.send_request({url:s.ajax_url.accept_auth,data:{poco_sns_psid:o,poco_sns_appname:l},callback:function(e){"function"==typeof t.auth_callback&&(t.auth_callback.call(this,e),t.clicked=!1,a.find("span").text("\u9a6c\u4e0a\u52a0\u5165"))},error:function(){t.clicked=!1,a.find("span").text("\u9a6c\u4e0a\u52a0\u5165")}}))}}}),r=a.View.extend({className:"popup_bg",initialize:function(e){var t=this,e=e||{},a=e.name||"",n='<div id="popup_container" style="position: absolute; top: 0px; z-index: 100000; left: 0px; width: 100%; height: 100%;background:rgba(0,0,0,0.5);display: table;"><div style="display:table-cell;vertical-align: middle;text-align: center;"><div class="radius-2px" style="width: 300px;height: 196px;background: #fff;margin: 0 auto;padding-top:15px;padding-bottom: 15px;"> <div style=" width: 270px; background: #ccc; height: 75px; margin: 0 auto 10px auto; "><img src="http://m.poco.cn/mobile/images/img-540x150.png" style="width:100%;height:100%"/></div> <div class="font_wryh" style=" width: 270px; margin: 0 auto; text-align: left; ">\u6b22\u8fce\u4f60\u4f7f\u7528  <span data-bind_nickname style="color:#58af28">'+a+'</span> \u767b\u5f55 \u4e16\u754c\u00b7POCO\u62cd\u5ba2\u793e\u533a\uff0c\u5728POCO\u76f8\u673a\u7684\u5206\u4eab\u9875\uff0c\u70b9\u51fb<i class="icon icon-poco icon-bg-common" style="width: 12px;  height: 12px; background-position:-68px -161px;display: inline-block;    overflow: hidden;margin: 0 2px;"></i>\u5373\u53ef\u5c06\u4f5c\u54c1\u540c\u6b65 \u81f3\u4e16\u754c\u00b7POCO\u62cd\u5ba2\u793e\u533a\u3002</div> <div style=" width: 270px; margin: 11px auto 0 auto; text-align: left; "> <div class="ui-btn-register" data_to_my="" style=" width: 125px; height: 45px; display: inline-block; margin-right: 10px; font-weight: bold; "><span class="radius-2px"> \u6211\u7684\u4e2a\u4eba\u4e3b\u9875</span></div> <div class="ui-btn-close" data_to_close="" style=" width: 125px;  height: 45px; display: inline-block; font-weight: bold; "><span class="bgc-fff-e6e radius-2px">\u5173\u95ed\u7a97\u53e3</span></div> </div> </div></div></div>';this.$el.html(n),t.resize(),i(window).bind("resize",function(){t.resize()}),i("body").append(this.$el)},show:function(){var e=this;e.$el.show()},close:function(){var e=this;e.$el.remove()},events:{"tap [data_to_my]":"navigate_to_my","tap [data_to_close]":"navigate_to_close"},resize:function(){var e=this,t=window.innerWidth,i=window.innerHeight,a=e.$el.find("#popup_container");a.width(t),a.height(i)},navigate_to_my:function(){var e=this;e.close();var t=n.get_local_poco_id();o.navigate_to_page("user_profile/"+t)},navigate_to_close:function(){var e=this;e.close()}});t.show_popup=function(e){return new r(e)},t.init_user_authorize_view=function(e){return new l(e)}});
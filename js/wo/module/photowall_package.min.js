define("wo/module/mobile_photo_collection",["base_package","commom_function"],function(e){var i=e("zepto"),t=e("backbone"),a=e("commom_function"),n=t.Model.extend({defaults:{summary:"",cover_img_url:"",like_count:"",art_id:"",cover_img_width:"",cover_img_height:"",order_ukey:""}});return new_mobile_photo_collection=function(e){var e=e||{},o={onload:!1,model:n,refresh:function(){e.data={},a.collection_refresh_function.call(this,e)},get_more_item:function(i){e.data=this.models.length>0&&!i?{order_ukey:this.models[this.models.length-1].attributes.order_ukey}:{},a.collection_get_more_function.call(this,e,i)},parse:function(e){return e&&e.result_data!==void 0?e.result_data:e}};o=i.extend(o,e);var d=t.Collection.extend(o);return new d}}),define("wo/module/photowall_controler",["base_package","btn_package","get_template","commom_function","wo_config"],function(e){var i=e("zepto"),t=e("backbone"),a=e("commom_function");return e("wo_config"),e("cookies"),new_photowall_controler=function(n){var n=n||{},o=n.use_paging||!1,d=n.no_more_control||!1,s=n.use_type_list||!1,l=n.init_type||!1,r=n.list_type_change||"",c={item_count:0,index_colume:"left",left_colume:{},right_colume:{},one_colume:{},wall_type:2,auth_banner_has_close:!1,events:{"tap [photowall_type_btn]":function(){this.change_wall_type(2),"function"==typeof r&&r.call(this,2)},"tap [onelist_type_btn]":function(){this.change_wall_type(1),"function"==typeof r&&r.call(this,1)}},initialize:function(){var t=this,n=e("get_template"),r=n.template_obj(),c=r.photo_wall_tb;if(i(this.el).html(c),o)var _=e("paging_btn")();else var _=e("load_more_btn")();d||i(this.el).append(_.$el),t.load_more_btn=_,this.one_colume=i(this.el).find(".actbox-item"),s&&(this.$el.find(".list_type_control_container").show(),this.photowall_type_btn=i(this.el).find("[photowall_type_btn]"),this.onelist_type_btn=i(this.el).find("[onelist_type_btn]"),2==l||a.is_empty(l)?this.change_wall_type(2):this.change_wall_type(1)),this.left_colume=i(this.el).find(".left_colume"),this.right_colume=i(this.el).find(".right_colume")},add_photowall_item:function(e){var i=this;if(2==this.wall_type){var t=i.left_colume.height(),a=i.right_colume.height();a>=t?(i.left_colume.append(e.$el),i.index_colume="right"):(i.right_colume.append(e.$el),i.index_colume="left")}else 1==this.wall_type&&i.one_colume.append(e.$el);i.load_more_btn.show(),i.item_count++},clear_photowall:function(){this.index_colume="left",this.left_colume.html(""),this.right_colume.html(""),this.one_colume.html(""),this.item_count=0},hide_more_btn:function(){this.load_more_btn.hide()},more_btn_loading:function(){this.load_more_btn.loadding()},more_btn_reset:function(){this.load_more_btn.reset()},return_paging_btn:function(){return this.load_more_btn},change_wall_type:function(e){this.wall_type=e,localStorage.setItem("cur_photo_wall_type",e),1==this.wall_type?(console.log(this),this.onelist_type_btn.addClass("cur_selected"),this.photowall_type_btn.removeClass("cur_selected"),this.one_colume.show()):(this.onelist_type_btn.removeClass("cur_selected"),this.photowall_type_btn.addClass("cur_selected"),this.one_colume.hide())}};c=i.extend(c,n);var _=t.View.extend(c);return new _}}),define("wo/module/photowall_item_view",["base_package","frame_package","commom_function","ua"],function(e){var i=e("zepto"),t=e("backbone"),a=e("mustache"),n=e("commom_function"),o=e("ua"),d=e("page_control");return new_photowall_item_view=function(e){var e=e||{},s={tagName:"div",className:"photowall_item font_wryh",events:{"tap [data-anchor]":function(){if(0!=this.art_id){if("index_list"==e.type){var i="http://imgtj.poco.cn/pocotj_touch.css?url=touch://mpoco/mobile/editor?url_hash=last&txt="+encodeURIComponent("\u9996\u9875\u4f5c\u54c1")+"&tmp="+(new Date).getTime(),t=new Image;t.src=i}this.btn_love_obj=this.$el.find(".icon-love");var a=""!=this.source?"/from_"+this.source:"";d.navigate_to_page("#last/"+this.art_id+a,{cover_img_width:this.cover_img_width,cover_img_height:this.cover_img_height,btn_love_obj:this.btn_love_obj,photo_txt_view:this.$el})}},"hold [data-anchor]":function(){var e=this;"new_img_list"!=e.type||n.is_empty(e.is_admin)||confirm("\u662f\u5426\u6392\u9664\u51fa\u6700\u65b0\u56fe\u7247?")&&n.send_request({url:"http://m.poco.cn/mobile/action/blacklist_user_from_new.php",data:{from:"new",art_id:e.art_id}}),"hot_img_list"!=e.type||n.is_empty(e.is_admin)||confirm("\u662f\u5426\u6392\u9664\u51fa\u70ed\u95e8\u56fe\u7247?")&&n.send_request({url:"http://m.poco.cn/mobile/action/blacklist_user_from_new.php",data:{from:"hot",art_id:e.art_id}})},"tap [data-user-info]":function(){var e=parseInt(this.user_id);e>0&&d.navigate_to_page("user_profile/"+e)},"tap .love-div":function(){if(d.page_lock_status())return!1;var e=this;if(0!=this.art_id){if(poco_id=n.get_local_poco_id(),0==poco_id)return d.navigate_to_page("login"),void 0;if(!e.on_like){e.on_like=!0;var i=e.$el.find(".love_count_wrap"),t=e.$el.find(".icon-love"),a=e.$el.find(".love_count"),o=parseInt(a.html());if(t.hasClass("cur")){var s=o-1;0>s&&(s=0),0==s&&i.css("display","none"),a.html(s),t.removeClass("cur");var l=0}else{a.html(o+1),o+1>0&&i.css("display","block"),t.addClass("cur");var l=1}n.like_photo_action(e.art_id,l,"list"),e.on_like=!1}}}},initialize:function(){if(!this.model.toJSON().cover_img_url)return!1;"6">o.ios_version&&this.$el.addClass("fixed_scroll_blink");var t=this.img_size_sort(this.model.toJSON());this.art_id=t.art_id,this.user_id=t.user_id,this.cover_img_width=t.cover_img_width,this.cover_img_height=t.cover_img_height,this.is_admin=t.is_admin,this.source=e.source||"",this.type=e.type||"";var n='<div class="love-div"><em class="icon-love icon-bg-common  {{#like_style}}cur{{/like_style}}"></em></div>';if("user_profile_list"==e.type)var d='<div data-anchor class="me-pic-info"><div class="txt lh16">{{summary}}</div><div class="love-box color999 clearfix"><span class="love_count_wrap mr10 fl"><em class="icon-love icon-bg-common fl mr5"></em><i class="love_count fsn fl">{{like_count}}</i></span><span class="cmt_wrap fl"><em class="icon-comment icon-bg-common fl mr5"></em><i class="comment-count fsn fl">{{cmt_count}}</i></span></div></div>';else if("new_img_list"==e.type)var d='<div class="new-img-item"  data-user-info><table border="0" cellspacing="0" cellpadding="0"><tr><td width="40"><div class="img middle-center"><img lazyload_src="{{user_icon}}" class="max-width-height" /></div></td><td><div class="info-box color999"><h4 class="fwn color000 clearfix"><span class="fl">{{user_nickname}}</span><em class="sex_icon icon-bg-common fl"></em></h4><div class="area">{{location_string}}</div></div></td></tr></table></div>';else var d='<div class="user-pic-info" data-user-info><table border="0" cellspacing="0" cellpadding="0"><tr><td width="40"><div class="img middle-center"><img lazyload_src="{{user_icon}}" class="max-width-height" /></div></td><td><div class="info-box color999"><h4 class="fwn color333"><span class="fl">{{user_nickname}}</span><em class="sex_icon icon-bg-common fl"  style="margin-top:0px;"></em></h4><div class="love-cmt-box clearfix"><span class="love_count_wrap mr10 fl"><em class="icon-love icon-bg-common fl mr5 {{#like_style}}cur{{/like_style}}"></em><i class="love_count fsn fl">{{like_count}}</i></span><span class="cmt_wrap fl"><em class="icon-comment icon-bg-common fl mr5"></em><i class="comment-count fsn fl">{{cmt_count}}</i></span></div></div></td></tr></table></div>';0==this.art_id&&(n="");var s='<div class="item"   art_id="{{art_id}}"  cover_img_width="{{cover_img_width}}"  cover_img_height="{{cover_img_height}}"><div data-anchor class="cover_img"><img  lazyload_src="{{{cover_img_url_s}}}"  style="height:{{img_show_height}}px;width:100%;"  class="img_buffer_bg"/></div>'+d+n,l=a.to_html(s,t);i(this.el).html(l);var r=this.$el.find(".cmt_wrap"),c=this.$el.find(".comment-count"),_=parseInt(c.html());0==_?r.css("display","none"):r.css("display","block");var p=this.$el.find(".love_count_wrap"),m=this.$el.find(".love_count"),h=parseInt(m.html());0==h?p.css("display","none"):p.css("display","block"),"\u7537"==t.user_sex?this.$el.find(".sex_icon").addClass("icon-male"):"\u5973"==t.user_sex?this.$el.find(".sex_icon").addClass("icon-female"):this.$el.find(".sex_icon").removeClass("icon-sex")},img_size_sort:function(e){return e.cover_img_url_s=n.matching_img_size(e.cover_img_url,"mm"),e.img_show_height=n.get_photowall_zoom_height_by_zoom_width(e.cover_img_width,e.cover_img_height),1==e.had_like&&(e.like_style=1),0==e.like_count&&(e.like_count_zero=!0),e.location_string=e.location_city==e.location_province||n.is_empty(e.location_city)?e.location_province:e.location_province+"\u00b7"+e.location_city,e}};s=i.extend(s,e);var l=t.View.extend(s);return new l}}),define("wo/module/photowall_other_item_view",["base_package","frame_package","commom_function","ua"],function(e){var i=e("zepto"),t=e("backbone"),a=e("mustache"),n=e("commom_function"),o=e("ua"),d=e("page_control");return new_photowall_item_theme_view=function(e){var e=e||{},s={tagName:"div",className:"other_photowall_item photowall_item font_wryh",type:"",events:{"tap [data_to_link]":"nav_to_page"},initialize:function(){if(!this.model.toJSON().cover_img_url)return!1;"6">o.ios_version&&this.$el.addClass("fixed_scroll_blink"),this.type=e.type||"";var t=this.img_size_sort(this.model.toJSON());this.link_url=t.link_url,this.summary=t.summary;var n='<div class="item bdb-line" data_to_link  cover_img_width="{{cover_img_width}}"  cover_img_height="{{cover_img_height}}"><div data-anchor class="cover_img"><img  lazyload_src="{{{cover_img_url_s}}}"  style="height:{{img_show_height}}px;width:100%;"  class="img_buffer_bg"/></div><div class="pop">{{summary}}</div>',d=a.to_html(n,t);i(this.el).html(d)},img_size_sort:function(e){return e.cover_img_url_s=n.matching_img_size(e.cover_img_url,"mm"),e.img_show_height=n.get_photowall_zoom_height_by_zoom_width(e.cover_img_width,e.cover_img_height),e},nav_to_page:function(){var e=this;if(!n.is_empty(e.link_url)){var i="http://imgtj.poco.cn/pocotj_touch.css?url=touch://mpoco/mobile/editor?url_hash="+encodeURIComponent(e.link_url)+"&txt="+encodeURIComponent(e.summary)+"&tmp="+(new Date).getTime(),t=new Image;t.src=i,d.navigate_to_page(e.link_url)}}};s=i.extend(s,e);var l=t.View.extend(s);return new l}}),"function"==typeof process_add&&process_add();
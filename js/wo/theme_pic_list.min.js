define("wo/theme_pic_list",["base_package","frame_package","btn_package","commom_function","wo_config","get_template","world_list_module","interact_module","app_function","new_alert_v2"],function(e,i){var a=e("zepto"),t=e("page_control");e("backbone");var n=e("commom_function"),d=e("wo_config"),o=e("app_function"),s=e("new_alert_v2");i.route={"theme_pic_list/:query":"theme_pic_list"},i.new_page_entity=function(){function i(e){"hot"==e?(_.$el.find("[hot_select_btn]").addClass("cur"),_.$el.find("[new_select_btn]").removeClass("cur"),g="hot"):(_.$el.find("[hot_select_btn]").removeClass("cur"),_.$el.find("[new_select_btn]").addClass("cur"),g="new")}var l={manual_title:!0,route:{"theme_pic_list/:query":"theme_pic_list"},transition_type:"slide",dom_not_cache:!0,ignore_exist:!0};l.initialize=function(){this.render()},l.render=function(){var i=e("get_template"),t=i.template_obj(),n=t.theme_pic_list;this.$el.append(a(n))},l.page_hide=function(){v.hide()},l.events={"tap .ui-btn-prev-wrap":function(){t.back()},swipe:function(e){"right"!=e.gesture.direction||n.get_ua().is_uc||t.back()},"tap [hot_select_btn]":function(){"hot"!=g&&(i("hot"),f.set_data({is_vouch:1,keyword:h}),f.start_reset())},"tap [new_select_btn]":function(){"new"!=g&&(i("new"),f.set_data({is_vouch:0,keyword:h}),f.start_reset())},"tap .icon-join-user-wrap":function(){return t.page_transit_status()?!1:(t.navigate_to_page("theme_join_user_list/"+encodeURIComponent(h)),void 0)},"tap footer":function(){var e=location.hash.replace("#",""),i=new Image;i.src="http://imgtj.poco.cn/pocotj_touch.css?url=touch://mpoco/mobile/publish_btn?url_hash="+e+"&tmp="+(new Date).getTime();var a=n.publish_login_requirement();if(a)t.navigate_to_page("login");else{var d=decodeURIComponent(c[0]);t.navigate_to_page("publish",{key_word:d,camera_sharestr:"#"+d+"#"})}},"tap .ui-btn-letter":function(){w||v.show()}},l.window_change=function(e){a(e.el).find(".main_wraper").height(n.container_height_with_head_and_nav()),a(e.el).find(".item-act .img img").css({height:"auto"})};var r,c,_,m,p,f,h,g,v,u,b,w=!0;l.page_before_show=function(){document.title=h},l.page_init=function(l,g,y){_=l,c=g,m=y,h=decodeURIComponent(g[0]),i("hot");var x=a(l.el).find("header"),k=e("page_back_btn")();x.prepend(k.$el);var $=a(l.el).find(".main_wraper"),z=e("scroll");r=z.new_scroll($,{view_height:n.container_height_with_head_and_nav(),use_lazyload:!0});var j=a(l.el).find(".ui-btn-letter");j.show();var C=e("interact_module");if(o.can_app_share())var I=!0,q=!0;else var I=!1,q=!1;v=new C({show_share_btn_list:I,share_btn_obj:{show:I,show_share_btn_list:{sina:!0,qqweibo:!0,qqzone:!0,weixin:q},share_btn_list_click_callback:function(e){var i=u.replace("-c","");"weixin"==e&&(i=n.matching_img_size(i,"ms"));var a="\u5206\u4eab\u4e86 \u4e3b\u9898\u6d3b\u52a8 #"+p+"#"+"\uff0c\uff08\u6765\u81ea #POCO\u4e16\u754c# \u624b\u673a\u62cd\u7167\u793e\u533a\uff09 ",t="http://wo.poco.cn/world_share.php?share_page=theme_pic_list&theme_title="+encodeURIComponent(p);o.can_app_share()?(o.is_world_app()||"sina"!=e||(t=encodeURIComponent(t)),o.app_share(e,i,a,t)):this.share_img(e,i,a,t)}},refresh_btn_obj:{show:!0,click_btn_callback:function(){return t.page_transit_status()?!1:(f.start_reset(),void 0)}}}),a(l.el).find(".wrap-box").append(v.$el);var T=e("world_list_module")();f=new T({url:d.ajax_url.theme_pic_list,data:{keyword:h},custom_data:{theme_keyword:h},list_type:"both",force_type:"big_img_list",page_view:l.$el.find(".wrap-box"),main_container:a(l.el).find(".main_container"),oncomplete:function(){w=!1,b.close()},onloading:function(){w=!0,b=s.show({text:"\u52a0\u8f7d\u4e2d",type:"loading",is_cover:!1,append_target:_.$el,auto_close_time:!1})},onreset:function(){r.scroll_to(0),_.$el&&_.$el.find("header").animate({translate3d:"0px, 0px, 0px"},0,"ease-in"),n.page_pv_stat_action()},onlisttypechange:function(){r.trigger_scrollend()},parse:function(e){return p=e.title,n.is_empty(e.world_top_data[0].cover_img_url)||(u=e.world_top_data[0].cover_img_url),1==e.is_open_vouch?l.$el.find(".tab-select").show():l.$el.find(".header_title").html(p).show(),1==e.have_theme_join_user_list&&l.$el.find(".icon-join-user-wrap").show(),e.photo_list},append_html:'<div style="display:none" class="icon-join-user-wrap dib border-style bgc-fff-e2e radius-2px"><span class="icon-bg-common oh icon "></span></div>'}),f.start_reset()};var y=e("page").new_page(l);return y}}),"function"==typeof process_add&&process_add();
define("wo/daily",["base_package","frame_package","btn_package","commom_function","wo_config","get_template","new_alert_v2"],function(e,t){var i=e("zepto"),a=e("page_control"),n=e("backbone"),o=e("commom_function"),r=e("mustache"),l=e("wo_config"),s=e("new_alert_v2");e("iScroll"),t.route={daily:"daily"},t.new_page_entity=function(){function t(){f.clear_list(),h.each(function(e){var t=new w({model:e});f.add_list_item(t)}),d.scroll_to(0),c.$el&&c.$el.find("header").animate({translate3d:"0px, 0px, 0px"},0,"ease-in")}function _(e){var t=new w({model:e});f.add_list_item(t)}var c,d,p,h,f,m=10,u={title:"\u4e2a\u4eba\u4e3b\u9875",route:{daily:"daily"},transition_type:"slide",dom_not_cache:!0,ignore_exist:!0};u.initialize=function(){this.render()},u.render=function(){var e='<div class="world-news-page font_wryh"><header class="header re tc fb">\u4e16\u754c\u65e5\u62a5</header><div class="main_wraper"><div style="padding-top:45px;"><div class="world-news m10"><ul class="world-news-list bdb-line mb10 bgcfff"></ul></div></div></div>';this.$el.append(i(e))};var g={ajax_load_finish:function(e,t,i,a){return p.close(),0==t&&f.return_paging_btn().hide(),null==t?(f.return_paging_btn().reset(),void 0):(a>1?f.return_paging_btn().open_pre_page_btn():f.return_paging_btn().ban_pre_page_btn(),0==t||m>t.length?f.return_paging_btn().ban_next_page_btn():f.return_paging_btn().open_next_page_btn(),void 0)},before_refresh:function(){p=s.show({text:"\u6b63\u5728\u52a0\u8f7d",type:"loading",append_target:c.$el})},before_get_more:function(){f.more_btn_loading()}},v=n.Model.extend({defaults:{}}),b=n.Collection.extend({model:v,url:function(){return l.ajax_url.daily},refresh:function(){o.collection_refresh_function.call(this,g)},get_more_item:function(e){(0>=this.models.length||e)&&(u.data={}),o.collection_get_more_function.call(this,g,e)}}),w=n.View.extend({tagName:"li",className:"li-world-list pl10 pt10 pr10",initialize:function(){this.render()},events:{"tap .li-world-list":function(){a.navigate_to_page("world_daliy/"+this.newspaper_id+"/1")}},render:function(){var e=this.model.toJSON();this.title=e.title,this.begin_date=e.begin_date,this.newspaper_id=parseInt(e.newspaper_id),e.cover_img_url_small&&(e.cover_img_url_small=o.matching_img_size(e.cover_img_url_small,"ss")),this.cover_img_url_small=e.cover_img_url_small;var t='<div class="bdb-line-e6e pb10"><table border="0" cellspacing="0" cellpadding="0" class="w-100 f12"><tr><td width="75"><div class="img-box re"><img src={{cover_img_url_small}} class="img_buffer_bg w-100"><div class="fade colorfff w-100 tc f10"><p>{{begin_date}}</p></div></div></td><td><div class="f14 color333" style="font-size:16px">{{title}}</div></td></tr></table></div>',a=r.to_html(t,e);i(this.el).html(a)}});u.events={swiperight:function(){o.get_ua().is_uc||a.back()},"tap .ui-btn-prev-wrap":function(){a.back()},"tap .pre_paging_btn":function(){var e=f.return_paging_btn();return e.get_pre_page_btn_ban_mode()?!1:(h.get_more_item(!0),void 0)},"tap .next_paging_btn":function(){var e=f.return_paging_btn();return e.get_next_page_btn_ban_mode()?!1:(h.get_more_item(!1),void 0)}},u.window_change=function(e){i(e.el).find(".main_wraper").height(o.container_height_with_head())},u.page_init=function(a){c=a;var n=i(a.el).find(".main_wraper"),r=e("scroll");d=r.new_scroll(n,{view_height:o.container_height_with_head(),use_lazyload:!0});var l=i(a.el).find("header"),s=e("page_back_btn")();l.prepend(s.$el),h=new b,f=new y({el:i(a.el).find(".world-news-list")}),h.bind("reset",t,a),h.bind("add",_,a),h.refresh()};var y=n.View.extend({initialize:function(){var t=this,a=e("paging_btn")();i(this.el).parent().append(a.$el),t.load_more_btn=a},add_list_item:function(e){var t=this;i(this.el).append(e.$el),t.load_more_btn.show()},clear_list:function(){i(this.el).html("")},return_paging_btn:function(){return this.load_more_btn},more_btn_loading:function(){this.load_more_btn.loadding()}}),x=e("page").new_page(u);return x}}),"function"==typeof process_add&&process_add();
define("wo/wealth_rank",["base_package","frame_package","btn_package","commom_function","wo_config","get_template","rank_nav","notice"],function(e,i){var t=e("zepto"),a=e("page_control"),n=e("backbone"),o=e("commom_function"),d=e("wo_config"),s=e("new_alert_v2"),l=e("mustache"),r=e("select_module")(),_=e("notice");i.route={"wealth_rank(/:time)":"wealth_rank"},i.new_page_entity=function(){function i(){return o.page_pv_stat_action(),h.$el.find(".select-city-data").show(),"day"==w?u.clear_list():"week"==w&&v.clear_list(),0==g.length?("day"==w?u.show_no_data():"week"==w&&v.show_no_data(),void 0):(g.each(function(e){var i=new S({model:e});"day"==w?(u.hide_no_data(),u.add_list_item(i)):"week"==w&&(v.hide_no_data(),v.add_list_item(i))}),p.scroll_to(0),void 0)}function c(e){h.$el.find("[data_select_date]").removeClass("cur"),h.$el.find("[data_select_date="+e+"]").addClass("cur"),"day"==e&&(u.show(),v.hide(),0==h.$el.find("[day_list_charm_rank] .rank_item").length&&g.refresh()),"week"==e&&(v.show(),u.hide(),0==h.$el.find("[week_list_charm_rank] .rank_item").length&&g.refresh())}var p,m,h,f,g,u,v,b,w,y,x,k={title:"\u8d22\u5bcc\u6392\u884c\u699c",route:{wealth_rank:"wealth_rank"},transition_type:"slide"},$="",j=[],z=!1,C=!1,I="",T={ajax_load_finish:function(e,i){if(x.close(),C=!1,y>0){if(!b){if(j=i.location.select_list,j.length>0){if(I=i.location.cur_location_key,!z){var t=i.location.cur_location_name;h.$el.find("[data_city_value]").html(t),z=!0}h.$el.find("[data_select_location]").show()}else h.$el.find("[data_select_location]").hide();console.log("new select_module_class"),b=new r({options_data:j,default_key:I,onchange:function(){select_data=this.get_select_data(),$=select_data.key;var e=select_data.val;h.$el.find("[data_city_value]").html(e),u.clear_list(),v.clear_list(),g.refresh()}})}}else b=null,h.$el.find("[data_select_location]").hide()},before_refresh:function(){x=s.show({text:"\u6b63\u5728\u52a0\u8f7d",type:"loading",is_cover:!1,append_target:h.$el}),C=!0}},q=n.Model.extend({defaults:{}}),O=n.Collection.extend({model:q,url:d.ajax_url.get_charm_expense_rank_list,refresh:function(){T.data={date_type:w,rank_type:"expense",location_city:$},o.collection_refresh_function.call(this,T)},parse:function(e){return e&&e.list!==void 0?e.list:e}}),S=n.View.extend({tagName:"ul",className:"rank_item",initialize:function(){this.render()},events:{"tap [data_user_page]":function(){a.navigate_to_page("user_profile/"+this.user_id)}},render:function(){var e=this.model.toJSON();this.rank_value=parseInt(e.rank_value),this.user_rank=parseInt(e.user_rank),this.sort_num=parseInt(e.sort_num),this.user_icon=e.user_icon,this.sex=e.sex,this.user_name=e.user_name,this.user_id=e.user_id,this.order_key=parseInt(e.order_key),this.user_rank_name=e.user_rank_name;var i="",a="";this.order_key>=1&&3>=this.order_key?(i="class_style"+this.order_key,a="icon-bg-common",y==this.user_id&&(i+=" class_self")):this.order_key>3&&y==this.user_id&&(i="class_self");var n='<li class="'+i+'" data_user_page><table border="0" cellspacing="0" cellpadding="0" class="w-100 f12"><tr><td width="50" align="center" style="border-right:1px solid #e1e1e1"><span class="sort_num db '+a+'">{{order_key}}</span></td><td><div class="clearfix pt10 pb10"><div class="fl ml10 mr10"><div class="user-pic middle-center img_buffer_bg"><img lazyload_src={{user_icon}} class="max-width-height"></div></div><div class="txt fl"><div class="clearfix"><span class="name fl color333 lh16 oh">{{user_name}}</span><em class="sex_icon fl icon-bg-common"></em></div><p class="color999">LV<em class="fsn user_rank mr5">{{user_rank}}</em> {{user_rank_name}}</p></div></div></td><td width="50"><span class="rank_value color666 db">+{{rank_value}}</span></td></tr></table></li>',o=l.to_html(n,e);t(this.el).html(o),"\u7537"==this.sex?t(this.el).find(".sex_icon").addClass("icon-male"):"\u5973"==this.sex&&t(this.el).find(".sex_icon").addClass("icon-female")}});k.initialize=function(){this.render()},k.render=function(){var i=e("get_template");i.template_obj();var a='<div class="wrap-box"><header class="header font_wryh fb tc re "><h3 class="tc" >\u8d22\u5bcc\u699c</h3></header><div class="main_wraper wealth_page"><div class="inside-page font_wryh" style="padding-top:45px;"><div style="overflow:hidden;position:relative;z-index: 1;"><div style="-webkit-transform:translateZ(0px);"></div></div><div class="main_container"><div class="list-page pl10 pr10"><div class="select-city-data clearfix mt10 color666" style="display:none"><div class="location_city bgcf0f border-style-be re fl radius-2px" data_select_location style="display:none"><span data_city_value class="city fl"></span><em class="fl ml20 icon-change mt5"></em></div><div class="data-list-change fr radius-2px"><ul class="clearfix"><li class="cur" data_select_date="day">\u65e5\u699c</li><li data_select_date="week">\u5468\u699c</li></ul></div></div><div class="list-item pt10 pb15" day_list_charm_rank><div no_data class="no_data_txt" style="display:none"><div class="contanier"><p>\u8d22\u5bcc\u699c\u6b63\u865a\u4f4d\u4ee5\u5f85</p><p>\u4e3a\u597d\u53cb\u589e\u6dfb\u4e00\u4e9b\u793c\u7269\u5427</p><p>\u660e\u5929\u4e5f\u8bb8\u5c31\u51fa\u73b0\u5728\u8fd9\u91cc</p></div></div><div data-list_container></div></div><div class="list-item pt10 pb15" week_list_charm_rank style="display:none"><div no_data class="no_data_txt" style="display:none"><div class="contanier"><p>\u8d22\u5bcc\u699c\u6b63\u865a\u4f4d\u4ee5\u5f85</p><p>\u4e3a\u597d\u53cb\u589e\u6dfb\u4e00\u4e9b\u793c\u7269\u5427</p><p>\u660e\u5929\u4e5f\u8bb8\u5c31\u51fa\u73b0\u5728\u8fd9\u91cc</p></div></div><div data-list_container></div></div></div></div></div></div></div>';this.$el.append(t(a))},k.events={"tap .ui-btn-prev-wrap":function(){a.back()},swiperight:function(){!o.get_ua().is_uc},"tap [data_select_location]":function(){b.open()},"tap [data_select_date]":function(e){return C?void 0:(w=t(e.currentTarget).attr("data_select_date"),t(e.currentTarget).hasClass("cur")?(g.refresh(),void 0):(c(w),void 0))},"tap .ui-btn-refresh-wrap":function(){g.refresh()}},k.window_change=function(e){t(e.el).find(".main_wraper").height(o.container_height_with_head()),t(e.el).find(".no_data_txt").height(o.container_height_with_head()-115)},k.page_before_show=function(){window.localStorage.setItem("rank_nav_address","wealth_rank"),_.footer_notice_ui_refresh(),y=o.get_local_poco_id()};var N;k.page_init=function(a,n,d){h=a,m=n,f=d,w=m[0]?m[0]:"day",N=e("refresh_btn")(),a.$el.find(".header").append(N.$el);var s=t(a.el).find("header"),l=e("page_back_btn")();s.prepend(l.$el);var r=t(a.el).find(".main_wraper"),_=e("scroll");p=_.new_scroll(r,{view_height:o.container_height_with_head(),use_lazyload:!0}),t(a.el).find(".no_data_txt").height(o.container_height_with_head()-115),u=new D({el:h.$el.find("[day_list_charm_rank]")}),v=new V({el:h.$el.find("[week_list_charm_rank]")}),g=new O,g.bind("reset",i,a),c(w)};var D=n.View.extend({initialize:function(e){},add_list_item:function(e){t(this.el).find("[data-list_container]").append(e.$el)},clear_list:function(){t(this.el).find("[data-list_container]").html("")},show:function(){t(this.el).show()},hide:function(){t(this.el).hide()},show_no_data:function(){t(this.el).find("[data-list_container]").hide(),t(this.el).find(".no_data_txt").css("display","table")},hide_no_data:function(){t(this.el).find("[data-list_container]").show(),t(this.el).find(".no_data_txt").hide()}}),V=n.View.extend({initialize:function(e){},add_list_item:function(e){t(this.el).find("[data-list_container]").append(e.$el)},clear_list:function(){t(this.el).find("[data-list_container]").html("")},show:function(){t(this.el).show()},hide:function(){t(this.el).hide()},show_no_data:function(){t(this.el).find("[data-list_container]").hide(),t(this.el).find(".no_data_txt").css("display","table")},hide_no_data:function(){t(this.el).find("[data-list_container]").show(),t(this.el).find(".no_data_txt").hide()}}),E=e("page").new_page(k);return E}}),"function"==typeof process_add&&process_add();